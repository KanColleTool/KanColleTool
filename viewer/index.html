<!DOCTYPE html>
<head>
	<title>Kantai Collection</title>
	<meta charset="utf-8" />
	<style type="text/css">
	html, body, embed, object { padding: 0; margin: 0; }
	</style>
	<script type="text/javascript">
	function setCredentials(server, apiToken) {
		/*// Remove any eventual old embeds
		var oldEmbeds = document.getElementsByTagName("embed")
		for(var i = 0; i < oldEmbeds.length; i++) { oldEmbeds[i].parentNode.removeChild(oldEmbeds[i]) }
		
		// Add a new one
		var e = document.createElement("embed")
		e.setAttribute("id", "externalswf")
		e.setAttribute("src", link)
		e.setAttribute("type", "application/x-shockwave-flash")
		e.setAttribute("width", "800")
		e.setAttribute("height", "480")
		e.setAttribute("wmode", "opaque")
		e.setAttribute("quality", "high")
		e.setAttribute("bgcolor", "#000000")
		e.setAttribute("allowscriptaccess", "always")
		e.setAttribute("base", "http://125.6.189.71/kcs/")
		document.getElementById("flashwrap").appendChild(e)*/
		flashInfo.apiToken = apiToken
		flashInfo.apiStartTime = new Date().getTime()
		kcsFlash_StartFlash("http://" + server + "/")
	}
	</script>
	
	<!-- Massive JS blob needed for things to work correctly -->
	<!-- You can find a readable version in the 'gadgets.js' file -->
	<script type="text/javascript">
function _IG_Fetch_wrapper(e,t){e(t.data?t.data:"")}function _IG_FetchContent(e,t,n){var r=n||{};if(r.refreshInterval){r["REFRESH_INTERVAL"]=r.refreshInterval}else{r["REFRESH_INTERVAL"]=3600}for(var i in r){var s=r[i];delete r[i];r[i.toUpperCase()]=s}var o=gadgets.util.makeClosure(null,_IG_Fetch_wrapper,t);gadgets.io.makeRequest(e,o,r)}function _IG_FetchXmlContent(e,t,n){var r=n||{};if(r.refreshInterval){r["REFRESH_INTERVAL"]=r.refreshInterval}else{r["REFRESH_INTERVAL"]=3600}r.CONTENT_TYPE="DOM";var i=gadgets.util.makeClosure(null,_IG_Fetch_wrapper,t);gadgets.io.makeRequest(e,i,r)}function _IG_FetchFeedAsJSON(e,t,n,r,i){var s=i||{};s.CONTENT_TYPE="FEED";s.NUM_ENTRIES=n;s.GET_SUMMARIES=r;gadgets.io.makeRequest(e,function(n){n.data=n.data||{};if(n.errors&&n.errors.length>0){n.data.ErrorMsg=n.errors[0]}if(n.data.link){n.data.URL=e}if(n.data.title){n.data.Title=n.data.title}if(n.data.description){n.data.Description=n.data.description}if(n.data.link){n.data.Link=n.data.link}if(n.data.items&&n.data.items.length>0){n.data.Entry=n.data.items;for(var r=0;r<n.data.Entry.length;++r){var i=n.data.Entry[r];i.Title=i.title;i.Link=i.link;i.Summary=i.summary||i.description;i.Date=i.pubDate}}for(var s=0;s<n.data.Entry.length;++s){var i=n.data.Entry[s];i.Date=i.Date/1e3}t(n.data)},s)}function _IG_GetCachedUrl(e,t){var n=t||{};n["REFRESH_INTERVAL"]=3600;if(n.refreshInterval){n["REFRESH_INTERVAL"]=n.refreshInterval}return gadgets.io.getProxyUrl(e,n)}function _IG_GetImageUrl(e,t){return _IG_GetCachedUrl(e,t)}function _IG_GetImage(e){var t=document.createElement("img");t.src=_IG_GetCachedUrl(e);return t}function _IG_RegisterOnloadHandler(e){gadgets.util.registerOnLoadHandler(e)}function _IG_Callback(e,t){var n=arguments;return function(){var t=Array.prototype.slice.call(arguments);e.apply(null,t.concat(Array.prototype.slice.call(n,1)))}}function _gel(e){return document.getElementById?document.getElementById(e):null}function _gelstn(e){if(e==="*"&&document.all){return document.all}return document.getElementsByTagName?document.getElementsByTagName(e):[]}function _gelsbyregex(e,t){var n=_gelstn(e);var r=[];for(var i=0,s=n.length;i<s;++i){if(t.test(n[i].id)){r.push(n[i])}}return r}function _esc(e){return window.encodeURIComponent?encodeURIComponent(e):escape(e)}function _unesc(e){return window.decodeURIComponent?decodeURIComponent(e):unescape(e)}function _hesc(e){return gadgets.util.escapeString(e)}function _striptags(e){return e.replace(/<\/?[^>]+>/g,"")}function _trim(e){return e.replace(/^\s+|\s+$/g,"")}function _toggle(e){e=typeof e==="string"?_gel(e):e;if(e!==null){if(e.style.display.length===0||e.style.display==="block"){e.style.display="none"}else if(e.style.display==="none"){e.style.display="block"}}}function _min(e,t){return e<t?e:t}function _max(e,t){return e>t?e:t}function _exportSymbols(e,t){var n=window;var r=e.split(".");for(var i=0,s=r.length;i<s;i++){var o=r[i];n[o]=n[o]||{};n=n[o]}for(var u=0,a=t.length;u<a;u+=2){n[t[u]]=t[u+1]}}function _IG_AddDOMEventHandler(e,t,n){gadgets.warn("_IG_AddDOMEventHandler not implemented - see SHINDIG-198")}var gadgets=gadgets||{};var shindig=shindig||{};var osapi=osapi||{};gadgets.config=function(){var e={};var t;return{register:function(t,n,r){var i=e[t];if(!i){i=[];e[t]=i}i.push({validators:n||{},callback:r})},get:function(e){if(e){return t[e]||{}}return t},init:function(n,r){t=n;for(var i in e){if(e.hasOwnProperty(i)){var s=e[i],o=n[i];for(var u=0,a=s.length;u<a;++u){var f=s[u];if(o&&!r){var l=f.validators;for(var c in l){if(l.hasOwnProperty(c)){if(!l[c](o[c])){throw new Error('Invalid config value "'+o[c]+'" for parameter "'+c+'" in component "'+i+'"')}}}}if(f.callback){f.callback(n)}}}}},EnumValidator:function(e){var t=[];if(arguments.length>1){for(var n=0,r;r=arguments[n];++n){t.push(r)}}else{t=e}return function(e){for(var n=0,r;r=t[n];++n){if(e===t[n]){return true}}return false}},RegExValidator:function(e){return function(t){return e.test(t)}},ExistsValidator:function(e){return typeof e!=="undefined"},NonEmptyStringValidator:function(e){return typeof e==="string"&&e.length>0},BooleanValidator:function(e){return typeof e==="boolean"},LikeValidator:function(e){return function(t){for(var n in e){if(e.hasOwnProperty(n)){var r=e[n];if(!r(t[n])){return false}}}return true}}}}();gadgets.config.isGadget=true;gadgets.config.isContainer=false;if(window.JSON&&window.JSON.parse&&window.JSON.stringify){gadgets["json"]=function(){var e=/___$/;return{parse:function(e){try{return window.JSON.parse(e)}catch(t){return false}},stringify:function(t){try{return window.JSON.stringify(t,function(t,n){return!e.test(t)?n:null})}catch(n){return null}}}}()}else{gadgets["json"]=function(){function f(e){return e<10?"0"+e:e}function stringify(e){var t,n,r,i,s=/["\\\x00-\x1f\x7f-\x9f]/g,o;switch(typeof e){case"string":return s.test(e)?'"'+e.replace(s,function(e){var t=m[e];if(t){return t}t=e.charCodeAt();return"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16)})+'"':'"'+e+'"';case"number":return isFinite(e)?String(e):"null";case"boolean":case"null":return String(e);case"object":if(!e){return"null"}t=[];if(typeof e.length==="number"&&!e.propertyIsEnumerable("length")){i=e.length;for(n=0;n<i;n+=1){t.push(stringify(e[n])||"null")}return"["+t.join(",")+"]"}for(r in e){if(r.match("___$"))continue;if(e.hasOwnProperty(r)){if(typeof r==="string"){o=stringify(e[r]);if(o){t.push(stringify(r)+":"+o)}}}}return"{"+t.join(",")+"}"}return"undefined"}Date.prototype.toJSON=function(){return[this.getUTCFullYear(),"-",f(this.getUTCMonth()+1),"-",f(this.getUTCDate()),"T",f(this.getUTCHours()),":",f(this.getUTCMinutes()),":",f(this.getUTCSeconds()),"Z"].join("")};var m={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return{stringify:stringify,parse:function(text){if(/^[\],:{}\s]*$/.test(text.replace(/\\["\\\/b-u]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return eval("("+text+")")}return false}}}()}gadgets["json"].flatten=function(e){var t={};if(e===null||e===undefined)return t;for(var n in e){if(e.hasOwnProperty(n)){var r=e[n];if(null===r||undefined===r){continue}t[n]=typeof r==="string"?r:gadgets.json.stringify(r)}}return t};var tamings___=tamings___||[];tamings___.push(function(e){___.tamesTo(gadgets.json.stringify,safeJSON.stringify);___.tamesTo(gadgets.json.parse,safeJSON.parse)});gadgets["util"]=function(){function e(e){var t;var n=e.indexOf("?");var r=e.indexOf("#");if(r===-1){t=e.substr(n+1)}else{t=[e.substr(n+1,r-n-1),"&",e.substr(r+1)].join("")}return t.split("&")}function o(e,t){return String.fromCharCode(t)}function u(e){n=e["core.util"]||{}}var t=null;var n={};var r={};var i=[];var s={0:false,10:true,13:true,34:true,39:true,60:true,62:true,92:true,8232:true,8233:true};if(gadgets.config){gadgets.config.register("core.util",null,u)}return{getUrlParameters:function(n){var r=typeof n==="undefined";if(t!==null&&r){return t}var i={};var s=e(n||document.location.href);var o=window.decodeURIComponent?decodeURIComponent:unescape;for(var u=0,a=s.length;u<a;++u){var f=s[u].indexOf("=");if(f===-1){continue}var l=s[u].substring(0,f);var c=s[u].substring(f+1);c=c.replace(/\+/g," ");i[l]=o(c)}if(r){t=i}return i},makeClosure:function(e,t,n){var r=[];for(var i=2,s=arguments.length;i<s;++i){r.push(arguments[i])}return function(){var n=r.slice();for(var i=0,s=arguments.length;i<s;++i){n.push(arguments[i])}return t.apply(e,n)}},makeEnum:function(e){var t,n,r={};for(t=0;n=e[t];++t){r[n]=n}return r},getFeatureParameters:function(e){return typeof n[e]==="undefined"?null:n[e]},hasFeature:function(e){return typeof n[e]!=="undefined"},getServices:function(){return r},registerOnLoadHandler:function(e){i.push(e)},runOnLoadHandlers:function(){for(var e=0,t=i.length;e<t;++e){i[e]()}},escape:function(e,t){if(!e){return e}else if(typeof e==="string"){return gadgets.util.escapeString(e)}else if(typeof e==="array"){for(var n=0,r=e.length;n<r;++n){e[n]=gadgets.util.escape(e[n])}}else if(typeof e==="object"&&t){var i={};for(var s in e){if(e.hasOwnProperty(s)){i[gadgets.util.escapeString(s)]=gadgets.util.escape(e[s],true)}}return i}return e},escapeString:function(e){if(!e)return e;var t=[],n,r;for(var i=0,o=e.length;i<o;++i){n=e.charCodeAt(i);r=s[n];if(r===true){t.push("&#",n,";")}else if(r!==false){t.push(e.charAt(i))}}return t.join("")},unescapeString:function(e){if(!e)return e;return e.replace(/&#([0-9]+);/g,o)},attachBrowserEvent:function(e,t,n,r){if(typeof e.addEventListener!="undefined"){e.addEventListener(t,n,r)}else if(typeof e.attachEvent!="undefined"){e.attachEvent("on"+t,n)}else{gadgets.warn("cannot attachBrowserEvent: "+t)}},removeBrowserEvent:function(e,t,n,r){if(e.removeEventListener){e.removeEventListener(t,n,r)}else if(e.detachEvent){e.detachEvent("on"+t,n)}else{gadgets.warn("cannot removeBrowserEvent: "+t)}}}}();gadgets["util"].getUrlParameters();var tamings___=tamings___||[];tamings___.push(function(e){caja___.whitelistFuncs([[gadgets.util,"escapeString"],[gadgets.util,"getFeatureParameters"],[gadgets.util,"getUrlParameters"],[gadgets.util,"hasFeature"],[gadgets.util,"registerOnLoadHandler"],[gadgets.util,"unescapeString"]])});(function(){function a(){var e=gadgets.util.getUrlParameters();for(var n in e){if(e.hasOwnProperty(n)){if(n.indexOf("up_")===0&&n.length>3){t[n.substr(3)]=String(e[n])}else if(n==="country"){o=e[n]}else if(n==="lang"){s=e[n]}else if(n==="mid"){u=e[n]}}}}function f(){for(var e in i){if(typeof t[e]==="undefined"){t[e]=i[e]}}}var e=null;var t={};var n=gadgets.util.escapeString;var r={};var i={};var s="en";var o="US";var u=0;gadgets.Prefs=function(){if(!e){a();f();e=this}return e};gadgets.Prefs.setInternal_=function(e,n){var r=false;if(typeof e==="string"){if(!t.hasOwnProperty(e)||t[e]!==n){r=true}t[e]=n}else{for(var i in e){if(e.hasOwnProperty(i)){var s=e[i];if(!t.hasOwnProperty(i)||t[i]!==s){r=true}t[i]=s}}}return r};gadgets.Prefs.setMessages_=function(e){r=e};gadgets.Prefs.setDefaultPrefs_=function(e){i=e};gadgets.Prefs.prototype.getString=function(e){if(e===".lang"){e="lang"}return t[e]?n(t[e]):""};gadgets.Prefs.prototype.setDontEscape_=function(){n=function(e){return e}};gadgets.Prefs.prototype.getInt=function(e){var n=parseInt(t[e],10);return isNaN(n)?0:n};gadgets.Prefs.prototype.getFloat=function(e){var n=parseFloat(t[e]);return isNaN(n)?0:n};gadgets.Prefs.prototype.getBool=function(e){var n=t[e];if(n){return n==="true"||n===true||!!parseInt(n,10)}return false};gadgets.Prefs.prototype.set=function(e,t){throw new Error("setprefs feature required to make this call.")};gadgets.Prefs.prototype.getArray=function(e){var r=t[e];if(r){var i=r.split("|");for(var s=0,o=i.length;s<o;++s){i[s]=n(i[s].replace(/%7C/g,"|"))}return i}return[]};gadgets.Prefs.prototype.setArray=function(e,t){throw new Error("setprefs feature required to make this call.")};gadgets.Prefs.prototype.getMsg=function(e){return r[e]||""};gadgets.Prefs.prototype.getCountry=function(){return o};gadgets.Prefs.prototype.getLang=function(){return s};gadgets.Prefs.prototype.getModuleId=function(){return u}})();var tamings___=tamings___||[];tamings___.push(function(e){caja___.whitelistCtors([[gadgets,"Prefs",Object]]);caja___.whitelistMeths([[gadgets.Prefs,"getArray"],[gadgets.Prefs,"getBool"],[gadgets.Prefs,"getCountry"],[gadgets.Prefs,"getFloat"],[gadgets.Prefs,"getInt"],[gadgets.Prefs,"getLang"],[gadgets.Prefs,"getMsg"],[gadgets.Prefs,"getString"],[gadgets.Prefs,"set"],[gadgets.Prefs,"setArray"]])});shindig.Auth=function(){function addParamsToToken(e){var t=authToken.split("&");for(var n=0;n<t.length;n++){var r=t[n].split("=");if(r.length===2){var i=r[0];var s=r[1];if(s==="$"){s=encodeURIComponent(e[i]);t[n]=i+"="+s}}}authToken=t.join("&")}function init(configuration){var urlParams=gadgets.util.getUrlParameters();var config=configuration["shindig.auth"]||{};if(config.authToken){authToken=config.authToken}else if(urlParams.st){authToken=urlParams.st}if(authToken!==null){addParamsToToken(urlParams)}if(config.trustedJson){trusted=eval("("+config.trustedJson+")")}}var authToken=null;var trusted=null;gadgets.config.register("shindig.auth",null,init);return{getSecurityToken:function(){return authToken},updateSecurityToken:function(e){authToken=e},getTrustedData:function(){return trusted}}};shindig.auth=new shindig.Auth;gadgets.io=function(){function makeXhr(){var e;if(typeof shindig!="undefined"&&shindig.xhrwrapper&&shindig.xhrwrapper.createXHR){return shindig.xhrwrapper.createXHR()}else if(typeof ActiveXObject!="undefined"){e=new ActiveXObject("Msxml2.XMLHTTP");if(!e){e=new ActiveXObject("Microsoft.XMLHTTP")}return e}else if(typeof XMLHttpRequest!="undefined"||window.XMLHttpRequest){return new window.XMLHttpRequest}else throw"no xhr available"}function hadError(e,t){if(e.readyState!==4){return true}try{if(e.status!==200){var n=""+e.status;if(e.responseText){n=n+" "+e.responseText}t({errors:[n],rc:e.status,text:e.responseText});return true}}catch(r){t({errors:[r.number+" Error not specified"],rc:r.number,text:r.description});return true}return false}function processNonProxiedResponse(e,t,n,r){if(hadError(r,t)){return}var i={body:r.responseText};t(transformResponseData(n,i))}function processResponse(url,callback,params,xobj){if(hadError(xobj,callback)){return}var txt=xobj.responseText;var offset=txt.indexOf(UNPARSEABLE_CRUFT)+UNPARSEABLE_CRUFT.length;if(offset<UNPARSEABLE_CRUFT.length)return;txt=txt.substr(offset);var data=eval("("+txt+")");data=data[url];if(data.oauthState){oauthState=data.oauthState}if(data.st){shindig.auth.updateSecurityToken(data.st)}callback(transformResponseData(params,data))}function transformResponseData(e,t){var n={text:t.body,rc:t.rc||200,headers:t.headers,oauthApprovalUrl:t.oauthApprovalUrl,oauthError:t.oauthError,oauthErrorText:t.oauthErrorText,errors:[]};if(n.rc<200||n.rc>=400){n.errors=[n.rc+" Error"]}else if(n.text){if(n.rc>=300&&n.rc<400){e.CONTENT_TYPE="TEXT"}switch(e.CONTENT_TYPE){case"JSON":case"FEED":n.data=gadgets.json.parse(n.text);if(!n.data){n.errors.push("500 Failed to parse JSON");n.rc=500;n.data=null}break;case"DOM":var r;if(typeof ActiveXObject!="undefined"){r=new ActiveXObject("Microsoft.XMLDOM");r.async=false;r.validateOnParse=false;r.resolveExternals=false;if(!r.loadXML(n.text)){n.errors.push("500 Failed to parse XML");n.rc=500}else{n.data=r}}else{var i=new DOMParser;r=i.parseFromString(n.text,"text/xml");if("parsererror"===r.documentElement.nodeName){n.errors.push("500 Failed to parse XML");n.rc=500}else{n.data=r}}break;default:n.data=n.text;break}}return n}function makeXhrRequest(e,t,n,r,i,s,o,u){var a=makeXhr();if(t.indexOf("//")==0){t=document.location.protocol+t}a.open(i,t,true);if(n){a.onreadystatechange=gadgets.util.makeClosure(null,o,e,n,s,a)}if(r!==null){a.setRequestHeader("Content-Type",u||"application/x-www-form-urlencoded");a.send(r)}else{a.send(null)}}function respondWithPreload(e,t,n){if(gadgets.io.preloaded_&&e.httpMethod==="GET"){for(var r=0;r<gadgets.io.preloaded_.length;r++){var i=gadgets.io.preloaded_[r];if(i&&i.id===e.url){delete gadgets.io.preloaded_[r];if(i.rc!==200){n({rc:i.rc,errors:[i.rc+" Error"]})}else{if(i.oauthState){oauthState=i.oauthState}var s={body:i.body,rc:i.rc,headers:i.headers,oauthApprovalUrl:i.oauthApprovalUrl,oauthError:i.oauthError,oauthErrorText:i.oauthErrorText,errors:[]};n(transformResponseData(t,s))}return true}}}return false}function init(e){config=e["core.io"]||{}}var config={};var oauthState;var UNPARSEABLE_CRUFT="throw 1; < don't be evil' >";var requiredConfig={proxyUrl:new gadgets.config.RegExValidator(/.*%(raw)?url%.*/),jsonProxyUrl:gadgets.config.NonEmptyStringValidator};gadgets.config.register("core.io",requiredConfig,init);return{makeRequest:function(e,t,n){var r=n||{};var i=r.METHOD||"GET";var s=r.REFRESH_INTERVAL;var o,u;if(r.AUTHORIZATION&&r.AUTHORIZATION!=="NONE"){o=r.AUTHORIZATION.toLowerCase();u=shindig.auth.getSecurityToken()}else{if(i==="GET"&&s===undefined){s=3600}}var a=true;if(typeof r.OWNER_SIGNED!=="undefined"){a=r.OWNER_SIGNED}var f=true;if(typeof r.VIEWER_SIGNED!=="undefined"){f=r.VIEWER_SIGNED}var l=r.HEADERS||{};if(i==="POST"&&!l["Content-Type"]){l["Content-Type"]="application/x-www-form-urlencoded"}var c=gadgets.util.getUrlParameters();var h={url:e,httpMethod:i,headers:gadgets.io.encodeValues(l,false),postData:r.POST_DATA||"",authz:o||"",st:u||"",contentType:r.CONTENT_TYPE||"TEXT",numEntries:r.NUM_ENTRIES||"3",getSummaries:!!r.GET_SUMMARIES,signOwner:a,signViewer:f,gadget:c.url,container:c.container||c.synd||"default",bypassSpecCache:gadgets.util.getUrlParameters().nocache||"",getFullHeaders:!!r.GET_FULL_HEADERS};if(o==="oauth"||o==="signed"){if(gadgets.io.oauthReceivedCallbackUrl_){h.OAUTH_RECEIVED_CALLBACK=gadgets.io.oauthReceivedCallbackUrl_;gadgets.io.oauthReceivedCallbackUrl_=null}h.oauthState=oauthState||"";for(var p in r){if(r.hasOwnProperty(p)){if(p.indexOf("OAUTH_")===0){h[p]=r[p]}}}}var d=config.jsonProxyUrl.replace("%host%",document.location.host);if(!respondWithPreload(h,r,t,processResponse)){if(i==="GET"&&s>0){var v="?refresh="+s+"&"+gadgets.io.encodeValues(h);makeXhrRequest(e,d+v,t,null,"GET",r,processResponse)}else{makeXhrRequest(e,d,t,gadgets.io.encodeValues(h),"POST",r,processResponse)}}},makeNonProxiedRequest:function(e,t,n,r){var i=n||{};makeXhrRequest(e,e,t,i.POST_DATA,i.METHOD,i,processNonProxiedResponse,r)},clearOAuthState:function(){oauthState=undefined},encodeValues:function(e,t){var n=!t;var r=[];var i=false;for(var s in e){if(e.hasOwnProperty(s)&&!/___$/.test(s)){if(!i){i=true}else{r.push("&")}r.push(n?encodeURIComponent(s):s);r.push("=");r.push(n?encodeURIComponent(e[s]):e[s])}}return r.join("")},getProxyUrl:function(e,t){var n=t||{};var r=n.REFRESH_INTERVAL;if(r===undefined){r="3600"}var i=gadgets.util.getUrlParameters();var s=n.rewriteMime?"&rewriteMime="+encodeURIComponent(n.rewriteMime):"";var o=config.proxyUrl.replace("%url%",encodeURIComponent(e)).replace("%host%",document.location.host).replace("%rawurl%",e).replace("%refresh%",encodeURIComponent(r)).replace("%gadget%",encodeURIComponent(i.url)).replace("%container%",encodeURIComponent(i.container||i.synd||"default")).replace("%rewriteMime%",s);if(o.indexOf("//")==0){o=window.location.protocol+o}return o}}}();gadgets.io.RequestParameters=gadgets.util.makeEnum(["METHOD","CONTENT_TYPE","POST_DATA","HEADERS","AUTHORIZATION","NUM_ENTRIES","GET_SUMMARIES","GET_FULL_HEADERS","REFRESH_INTERVAL","OAUTH_SERVICE_NAME","OAUTH_USE_TOKEN","OAUTH_TOKEN_NAME","OAUTH_REQUEST_TOKEN","OAUTH_REQUEST_TOKEN_SECRET","OAUTH_RECEIVED_CALLBACK"]);gadgets.io.MethodType=gadgets.util.makeEnum(["GET","POST","PUT","DELETE","HEAD"]);gadgets.io.ContentType=gadgets.util.makeEnum(["TEXT","DOM","JSON","FEED"]);gadgets.io.AuthorizationType=gadgets.util.makeEnum(["NONE","SIGNED","OAUTH"]);var tamings___=tamings___||[];tamings___.push(function(e){caja___.whitelistFuncs([[gadgets.io,"encodeValues"],[gadgets.io,"getProxyUrl"],[gadgets.io,"makeRequest"]])});var gadgets;var JSON=window.JSON||gadgets.json;var _IG_Prefs=function(){var e=null;var t=function(){if(!e){e=new gadgets.Prefs;e.setDontEscape_()}return e};t._parseURL=gadgets.Prefs.parseUrl;return t}();var _args=gadgets.util.getUrlParameters;var _uid=function(){var e=0;return function(){return e++}}();gadgets.window=gadgets.window||{};(function(){gadgets.window.getViewportDimensions=function(){var e=0;var t=0;if(self.innerHeight){e=self.innerWidth;t=self.innerHeight}else if(document.documentElement&&document.documentElement.clientHeight){e=document.documentElement.clientWidth;t=document.documentElement.clientHeight}else if(document.body){e=document.body.clientWidth;t=document.body.clientHeight}return{width:e,height:t}}})();gadgets.flash=gadgets.flash||{};gadgets.flash.getMajorVersion=function(){var e=0;if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){var t=navigator.plugins["Shockwave Flash"];if(t&&t.description){e=parseInt(t.description.match(/[0-9]+/)[0],10)}}else{for(var n=10;n>0;n--){try{var r=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+n);return n}catch(i){}}}return e};gadgets.flash.swfContainerId_=0;gadgets.flash.embedFlash=function(e,t,n,r){switch(typeof t){case"string":t=document.getElementById(t);case"object":if(t&&typeof t.innerHTML==="string"){break};default:return false}switch(typeof r){case"undefined":r={};case"object":break;default:return false}if(e.indexOf("//")==0){e=document.location.protocol+e}var i=gadgets.flash.getMajorVersion();if(i){var s=parseInt(n,10);if(isNaN(s)){s=0}if(i>=s){if(r.width===void 0){r.width="100%"}if(r.height===void 0){r.height="100%"}if(typeof r.base!=="string"){var o=document.createElement("a");o.href=e;r.base=o.href.match(/^(.*\/)[^\/]*$/)[1]}if(typeof r.wmode!=="string"){r.wmode="opaque"}while(!r.id){var u="swfContainer"+gadgets.flash.swfContainerId_++;if(!document.getElementById(u)){r.id=u}}var a;if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){r.type="application/x-shockwave-flash";r.src=e;a=document.createElement("embed");for(var f in r){if(!/^swf_/.test(f)&&!/___$/.test(f)){a.setAttribute(f,r[f])}}t.innerHTML="";t.appendChild(a);return true}else{var l=function(e){return!/["<>]/.test(e)};r.movie=e;var c={width:r.width,height:r.height,classid:"clsid:D27CDB6E-AE6D-11CF-96B8-444553540000"};if(r.id){c.id=r.id}var h="<object";for(var p in c){if(!/___$/.test(p)&&l(p)&&l(c[p])){h+=" "+p+'="'+c[p]+'"'}}h+=">";for(var d in r){var v=document.createElement("param");if(!/^swf_/.test(d)&&!c[d]&&!/___$/.test(d)&&l(d)&&l(r[d])){h+='<param name="'+d+'" value="'+r[d]+'" />'}}h+="</object>"}t.innerHTML=h;return true}}return false};gadgets.flash.embedCachedFlash=function(e,t,n,r){var i=gadgets.io.getProxyUrl(e,{rewriteMime:"application/x-shockwave-flash"});return gadgets.flash.embedFlash(i,t,n,r)};var _IG_GetFlashMajorVersion=gadgets.flash.getMajorVersion;var _IG_EmbedFlash=function(e,t,n){return gadgets.flash.embedFlash(e,t,n.swf_version,n)};var _IG_EmbedCachedFlash=function(e,t,n){return gadgets.flash.embedCachedFlash(e,t,n.swf_version,n)};var tamings___=tamings___||[];var bridge___;tamings___.push(function(e){___.tamesTo(gadgets.flash.embedFlash,function(){var e=function(){var e=document.createElement("iframe");e.width=1;e.height=1;e.border=0;document.body.appendChild(e);var t=e.contentWindow.Object;document.body.removeChild(e);var n=function(e){var r=typeof e,i;if(r==="number"||r==="boolean"||r==="string"){return e}if(r==="object"){var s=new t;for(i in e){if(/__$/.test(i)){continue}s[i]=n(e[i])}if(e.length!==undefined){s.length=e.length}return s}return void 0};return n}();var t=document.createElement("div");t.appendChild(document.createTextNode("bridge"));document.body.appendChild(t);gadgets.flash.embedFlash("/container/Bridge.swf",t,10,{allowNetworking:"always",allowScriptAccess:"all",width:0,height:0,flashvars:"logging=true"});bridge___=t.childNodes[0];bridge___.channels=[];callJS=function(e,t){var n=___.getNewModuleHandler().getImports().$v;return n.cf(n.ro(e),t)};onFlashBridgeReady=function(){var e=bridge___.channels.length;for(var t=0;t<e;++t){bridge___.registerChannel(bridge___.channels[t])}delete bridge___.channels;var n=___.getNewModuleHandler().getImports().$v.getOuters();if(n.onFlashBridgeReady){callJS("onFlashBridgeReady",[])}};return ___.frozenFunc(function(n,r,s,o){if(typeof r==="string"){var u=___.getNewModuleHandler().getImports().$v;r=u.cm(u.ro("document"),"getElementById",[r])}else if(typeof r!=="object"||!r.node___){return false}var a="_flash"+(""+Math.random()).substring(2);var f={};for(i in o){if(i.match(/___$/)){continue}var l=i.toLowerCase();if(l==="allownetworking"||l==="allowscriptaccess"){continue}var c=typeof o[i];if(c!=="string"&&c!=="number"){continue}f[i]=o[i]}f.allowNetworking="never";f.allowScriptAccess="none";if(!f.flashVars){f.flashVars=""}f.flashVars+="&channel="+a;gadgets.flash.embedFlash(n,r.node___,10,f);if(bridge___.channels){bridge___.channels.push(a)}else{bridge___.registerChannel(a)}return ___.primFreeze({callSWF:function(t){return ___.func(function(n,r){return bridge___.callSWF(""+t,""+n,e(r))})}(a)})})}())});var opensocial=opensocial||{};opensocial.requestSendMessage=function(e,t,n,r){return opensocial.Container.get().requestSendMessage(e,t,n,r)};opensocial.requestShareApp=function(e,t,n,r){opensocial.Container.get().requestShareApp(e,t,n,r)};opensocial.requestCreateActivity=function(e,t,n){if(!e||!e.getField(opensocial.Activity.Field.TITLE)&&!e.getField(opensocial.Activity.Field.TITLE_ID)){if(n){window.setTimeout(function(){n(new opensocial.ResponseItem(null,null,opensocial.ResponseItem.Error.BAD_REQUEST,"You must pass in an activity with a title or title id."))},0)}return}opensocial.Container.get().requestCreateActivity(e,t,n)};opensocial.CreateActivityPriority={HIGH:"HIGH",LOW:"LOW"};opensocial.hasPermission=function(e){return opensocial.Container.get().hasPermission(e)};opensocial.requestPermission=function(e,t,n){opensocial.Container.get().requestPermission(e,t,n)};opensocial.Permission={VIEWER:"viewer"};opensocial.getEnvironment=function(){return opensocial.Container.get().getEnvironment()};opensocial.newDataRequest=function(){return opensocial.Container.get().newDataRequest()};opensocial.newActivity=function(e){return opensocial.Container.get().newActivity(e)};opensocial.newAlbum=function(e){return opensocial.Container.get().newAlbum(e)};opensocial.newMediaItem=function(e,t,n){return opensocial.Container.get().newMediaItem(e,t,n)};opensocial.newMessage=function(e,t){return opensocial.Container.get().newMessage(e,t)};opensocial.EscapeType={HTML_ESCAPE:"htmlEscape",NONE:"none"};opensocial.newIdSpec=function(e){return opensocial.Container.get().newIdSpec(e)};opensocial.newNavigationParameters=function(e){return opensocial.Container.get().newNavigationParameters(e)};opensocial.invalidateCache=function(){opensocial.Container.get().invalidateCache()};Function.prototype.inherits=function(e){function t(){}t.prototype=e.prototype;this.superClass_=e.prototype;this.prototype=new t;this.prototype.constructor=this};opensocial.Activity=function(e){this.fields_=e};opensocial.Activity.Field={TITLE_ID:"titleId",TITLE:"title",TEMPLATE_PARAMS:"templateParams",URL:"url",MEDIA_ITEMS:"mediaItems",BODY_ID:"bodyId",BODY:"body",EXTERNAL_ID:"externalId",STREAM_TITLE:"streamTitle",STREAM_URL:"streamUrl",STREAM_SOURCE_URL:"streamSourceUrl",STREAM_FAVICON_URL:"streamFaviconUrl",PRIORITY:"priority",ID:"id",USER_ID:"userId",APP_ID:"appId",POSTED_TIME:"postedTime"};opensocial.Activity.prototype.getId=function(){return this.getField(opensocial.Activity.Field.ID)};opensocial.Activity.prototype.getField=function(e,t){return opensocial.Container.getField(this.fields_,e,t)};opensocial.Activity.prototype.setField=function(e,t){return this.fields_[e]=t};opensocial.Address=function(e){this.fields_=e||{}};opensocial.Address.Field={TYPE:"type",UNSTRUCTURED_ADDRESS:"unstructuredAddress",PO_BOX:"poBox",STREET_ADDRESS:"streetAddress",EXTENDED_ADDRESS:"extendedAddress",REGION:"region",LOCALITY:"locality",POSTAL_CODE:"postalCode",COUNTRY:"country",LATITUDE:"latitude",LONGITUDE:"longitude"};opensocial.Address.prototype.getField=function(e,t){return opensocial.Container.getField(this.fields_,e,t)};opensocial.Album=function(e){this.fields_=e||{}};opensocial.Album.Field={DESCRIPTION:"description",ID:"id",LOCATION:"location",MEDIA_ITEM_COUNT:"mediaITemCount",MEDIA_MIME_TYPE:"MEDIA_MIME_TYPE",MEDIA_TYPE:"MEDIA_TYPE",OWNER_ID:"ownerId",THUMBNAIL_URL:"thumbnailUrl",TITLE:"title"};opensocial.Album.prototype.getField=function(e,t){return opensocial.Container.getField(this.fields_,e,t)};opensocial.Album.prototype.setField=function(e,t){return this.fields_[e]=t};opensocial.BodyType=function(e){this.fields_=e||{}};opensocial.BodyType.Field={BUILD:"build",HEIGHT:"height",WEIGHT:"weight",EYE_COLOR:"eyeColor",HAIR_COLOR:"hairColor"};opensocial.BodyType.prototype.getField=function(e,t){return opensocial.Container.getField(this.fields_,e,t)};opensocial.Collection=function(e,t,n){this.array_=e||[];this.offset_=t||0;this.totalSize_=n||this.array_.length};opensocial.Collection.prototype.getById=function(e){for(var t=0;t<this.size();t++){var n=this.array_[t];if(n.getId()===e){return n}}return null};opensocial.Collection.prototype.size=function(){return this.array_.length};opensocial.Collection.prototype.each=function(e){for(var t=0;t<this.size();t++){e(this.array_[t])}};opensocial.Collection.prototype.asArray=function(){return this.array_};opensocial.Collection.prototype.getTotalSize=function(){return this.totalSize_};opensocial.Collection.prototype.getOffset=function(){return this.offset_};opensocial.Container=function(){};opensocial.Container.container_=null;opensocial.Container.setContainer=function(e){opensocial.Container.container_=e};opensocial.Container.get=function(){return opensocial.Container.container_};opensocial.Container.prototype.getEnvironment=function(){};opensocial.Container.prototype.requestSendMessage=function(e,t,n,r){gadgets.rpc.call(null,"requestSendMessage",n,e,t,n,r)};opensocial.Container.prototype.requestShareApp=function(e,t,n,r){if(n){window.setTimeout(function(){n(new opensocial.ResponseItem(null,null,opensocial.ResponseItem.Error.NOT_IMPLEMENTED,null))},0)}};opensocial.Container.prototype.requestCreateActivity=function(e,t,n){if(n){window.setTimeout(function(){n(new opensocial.ResponseItem(null,null,opensocial.ResponseItem.Error.NOT_IMPLEMENTED,null))},0)}};opensocial.Container.prototype.hasPermission=function(e){return false};opensocial.Container.prototype.requestPermission=function(e,t,n){if(n){window.setTimeout(function(){n(new opensocial.ResponseItem(null,null,opensocial.ResponseItem.Error.NOT_IMPLEMENTED,null))},0)}};opensocial.Container.prototype.requestData=function(e,t){};opensocial.Container.prototype.newCreateAlbumRequest=function(e,t){};opensocial.Container.prototype.newCreateMediaItemRequest=function(e,t,n){};opensocial.Container.prototype.newDeleteAlbumRequest=function(e,t){};opensocial.Container.prototype.newFetchPersonRequest=function(e,t){};opensocial.Container.prototype.newFetchPeopleRequest=function(e,t){};opensocial.Container.prototype.newFetchPersonAppDataRequest=function(e,t,n){};opensocial.Container.prototype.newUpdatePersonAppDataRequest=function(e,t){};opensocial.Container.prototype.newRemovePersonAppDataRequest=function(e){};opensocial.Container.prototype.newUpdateAlbumRequest=function(e,t,n){};opensocial.Container.prototype.newUpdateMediaItemRequest=function(e,t,n,r){};opensocial.Container.prototype.newFetchActivitiesRequest=function(e,t){};opensocial.Container.prototype.newFetchAlbumsRequest=function(e,t){};opensocial.Container.prototype.newFetchMessageCollectionsRequest=function(e,t){};opensocial.Container.prototype.newFetchMessagesRequest=function(e,t,n){};opensocial.Container.prototype.newCollection=function(e,t,n){return new opensocial.Collection(e,t,n)};opensocial.Container.prototype.newPerson=function(e,t,n){return new opensocial.Person(e,t,n)};opensocial.Container.prototype.newActivity=function(e){return new opensocial.Activity(e)};opensocial.Container.prototype.newAlbum=function(e){return new opensocial.Album(e)};opensocial.Container.prototype.newMediaItem=function(e,t,n){return new opensocial.MediaItem(e,t,n)};opensocial.Container.prototype.newMessage=function(e,t){return new opensocial.Message(e,t)};opensocial.Container.prototype.newIdSpec=function(e){return new opensocial.IdSpec(e)};opensocial.Container.prototype.newNavigationParameters=function(e){return new opensocial.NavigationParameters(e)};opensocial.Container.prototype.newResponseItem=function(e,t,n,r){return new opensocial.ResponseItem(e,t,n,r)};opensocial.Container.prototype.newDataResponse=function(e,t){return new opensocial.DataResponse(e,t)};opensocial.Container.prototype.newDataRequest=function(){return new opensocial.DataRequest};opensocial.Container.prototype.newEnvironment=function(e,t){return new opensocial.Environment(e,t)};opensocial.Container.prototype.invalidateCache=function(){};opensocial.Container.isArray=function(e){return e instanceof Array};opensocial.Container.getField=function(e,t,n){var r=e[t];return opensocial.Container.escape(r,n,false)};opensocial.Container.escape=function(e,t,n){if(t&&t[opensocial.DataRequest.DataRequestFields.ESCAPE_TYPE]==opensocial.EscapeType.NONE){return e}else{return gadgets.util.escape(e,n)}};opensocial.DataRequest=function(){this.requestObjects_=[]};opensocial.DataRequest.prototype.requestObjects_=null;opensocial.DataRequest.prototype.getRequestObjects=function(){return this.requestObjects_};opensocial.DataRequest.prototype.add=function(e,t){return this.requestObjects_.push({key:t,request:e})};opensocial.DataRequest.prototype.send=function(e){var t=e||function(){};opensocial.Container.get().requestData(this,t)};opensocial.DataRequest.SortOrder={TOP_FRIENDS:"topFriends",NAME:"name"};opensocial.DataRequest.FilterType={ALL:"all",HAS_APP:"hasApp",TOP_FRIENDS:"topFriends",IS_FRIENDS_WITH:"isFriendsWith"};opensocial.DataRequest.PeopleRequestFields={PROFILE_DETAILS:"profileDetail",SORT_ORDER:"sortOrder",FILTER:"filter",FILTER_OPTIONS:"filterOptions",FIRST:"first",MAX:"max",APP_DATA:"appData",ESCAPE_TYPE:"escapeType"};opensocial.DataRequest.prototype.addDefaultParam=function(e,t,n){e[t]=e[t]||n};opensocial.DataRequest.prototype.addDefaultProfileFields=function(e){var t=opensocial.DataRequest.PeopleRequestFields;var n=e[t.PROFILE_DETAILS]||[];e[t.PROFILE_DETAILS]=n.concat([opensocial.Person.Field.ID,opensocial.Person.Field.NAME,opensocial.Person.Field.THUMBNAIL_URL])};opensocial.DataRequest.prototype.asArray=function(e){if(opensocial.Container.isArray(e)){return e}else{return[e]}};opensocial.DataRequest.prototype.newCreateAlbumRequest=function(e,t){return opensocial.Container.get().newCreateAlbumRequest(e,t)};opensocial.DataRequest.prototype.newCreateMediaItemRequest=function(e,t,n){return opensocial.Container.get().newCreateMediaItemRequest(e,t,n)};opensocial.DataRequest.prototype.newDeleteAlbumRequest=function(e,t){return opensocial.Container.get().newDeleteAlbumRequest(e,t)};opensocial.DataRequest.prototype.newFetchPersonRequest=function(e,t){t=t||{};this.addDefaultProfileFields(t);return opensocial.Container.get().newFetchPersonRequest(e,t)};opensocial.DataRequest.prototype.newFetchPeopleRequest=function(e,t){t=t||{};var n=opensocial.DataRequest.PeopleRequestFields;this.addDefaultProfileFields(t);this.addDefaultParam(t,n.SORT_ORDER,opensocial.DataRequest.SortOrder.TOP_FRIENDS);this.addDefaultParam(t,n.FILTER,opensocial.DataRequest.FilterType.ALL);this.addDefaultParam(t,n.FIRST,0);this.addDefaultParam(t,n.MAX,20);return opensocial.Container.get().newFetchPeopleRequest(e,t)};opensocial.DataRequest.AlbumRequestFields={FIRST:"first",MAX:"max"};opensocial.DataRequest.DataRequestFields={ESCAPE_TYPE:"escapeType"};opensocial.DataRequest.prototype.newFetchPersonAppDataRequest=function(e,t,n){return opensocial.Container.get().newFetchPersonAppDataRequest(e,this.asArray(t),n)};opensocial.DataRequest.prototype.newUpdateAlbumRequest=function(e,t,n){return opensocial.Container.get().newUpdateAlbumRequest(e,t,n)};opensocial.DataRequest.prototype.newUpdateMediaItemRequest=function(e,t,n,r){return opensocial.Container.get().newUpdateMediaItemRequest(e,t,n,r)};opensocial.DataRequest.prototype.newUpdatePersonAppDataRequest=function(e,t){return opensocial.Container.get().newUpdatePersonAppDataRequest(e,t)};opensocial.DataRequest.prototype.newRemovePersonAppDataRequest=function(e){return opensocial.Container.get().newRemovePersonAppDataRequest(e)};opensocial.DataRequest.ActivityRequestFields={APP_ID:"appId",FIRST:"first",MAX:"max"};opensocial.DataRequest.prototype.newFetchActivitiesRequest=function(e,t){t=t||{};var n=opensocial.DataRequest.ActivityRequestFields;this.addDefaultParam(t,n.FIRST,0);this.addDefaultParam(t,n.MAX,20);return opensocial.Container.get().newFetchActivitiesRequest(e,t)};opensocial.DataRequest.prototype.newFetchAlbumsRequest=function(e,t){t=t||{};return opensocial.Container.get().newFetchAlbumsRequest(e,t)};opensocial.DataRequest.prototype.newFetchMessageCollectionsRequest=function(e,t){t=t||{};return opensocial.Container.get().newFetchMessageCollectionsRequest(e,t)};opensocial.DataRequest.prototype.newFetchMessagesRequest=function(e,t,n){n=n||{};return opensocial.Container.get().newFetchMessagesRequest(e,t,n)};opensocial.DataResponse=function(e,t,n){this.responseItems_=e;this.globalError_=t;this.errorMessage_=n};opensocial.DataResponse.prototype.hadError=function(){return!!this.globalError_};opensocial.DataResponse.prototype.getErrorMessage=function(){return this.errorMessage_};opensocial.DataResponse.prototype.get=function(e){return this.responseItems_[e]};opensocial.Email=function(e){this.fields_=e||{}};opensocial.Email.Field={TYPE:"type",ADDRESS:"address"};opensocial.Email.prototype.getField=function(e,t){return opensocial.Container.getField(this.fields_,e,t)};opensocial.Enum=function(e,t){this.key=e;this.displayValue=t};opensocial.Enum.prototype.getKey=function(){return gadgets.util.escape(this.key)};opensocial.Enum.prototype.getDisplayValue=function(){return gadgets.util.escape(this.displayValue)};opensocial.Enum.Smoker={NO:"NO",YES:"YES",SOCIALLY:"SOCIALLY",OCCASIONALLY:"OCCASIONALLY",REGULARLY:"REGULARLY",HEAVILY:"HEAVILY",QUITTING:"QUITTING",QUIT:"QUIT"};opensocial.Enum.Drinker={NO:"NO",YES:"YES",SOCIALLY:"SOCIALLY",OCCASIONALLY:"OCCASIONALLY",REGULARLY:"REGULARLY",HEAVILY:"HEAVILY",QUITTING:"QUITTING",QUIT:"QUIT"};opensocial.Enum.Gender={MALE:"MALE",FEMALE:"FEMALE"};opensocial.Enum.LookingFor={DATING:"DATING",FRIENDS:"FRIENDS",RELATIONSHIP:"RELATIONSHIP",NETWORKING:"NETWORKING",ACTIVITY_PARTNERS:"ACTIVITY_PARTNERS",RANDOM:"RANDOM"};opensocial.Enum.Presence={AWAY:"AWAY",CHAT:"CHAT",DND:"DND",OFFLINE:"OFFLINE",ONLINE:"ONLINE",XA:"XA"};opensocial.Environment=function(e,t){this.domain=e;this.supportedFields=t};opensocial.Environment.prototype.getDomain=function(){return this.domain};opensocial.Environment.ObjectType={PERSON:"person",ADDRESS:"address",BODY_TYPE:"bodyType",EMAIL:"email",NAME:"name",ORGANIZATION:"organization",PHONE:"phone",URL:"url",ACTIVITY:"activity",MEDIA_ITEM:"mediaItem",MESSAGE:"message",MESSAGE_TYPE:"messageType",SORT_ORDER:"sortOrder",FILTER_TYPE:"filterType"};opensocial.Environment.prototype.supportsField=function(e,t){var n=this.supportedFields[e]||[];return!!n[t]};opensocial.IdSpec=function(e){this.fields_=e||{}};opensocial.IdSpec.Field={USER_ID:"userId",GROUP_ID:"groupId",NETWORK_DISTANCE:"networkDistance"};opensocial.IdSpec.PersonId={OWNER:"OWNER",VIEWER:"VIEWER"};opensocial.IdSpec.GroupId={SELF:"SELF",FRIENDS:"FRIENDS",ALL:"ALL"};opensocial.IdSpec.prototype.getField=function(e,t){return opensocial.Container.getField(this.fields_,e,t)};opensocial.IdSpec.prototype.setField=function(e,t){return this.fields_[e]=t};opensocial.MediaItem=function(e,t,n){this.fields_={};if(n){for(var r in n){if(n.hasOwnProperty(r)){this.fields_[r]=n[r]}}}this.fields_[opensocial.MediaItem.Field.MIME_TYPE]=e;this.fields_[opensocial.MediaItem.Field.URL]=t};opensocial.MediaItem.Type={IMAGE:"image",VIDEO:"video",AUDIO:"audio"};opensocial.MediaItem.Field={TYPE:"type",MIME_TYPE:"mimeType",URL:"url"};opensocial.MediaItem.prototype.getField=function(e,t){return opensocial.Container.getField(this.fields_,e,t)};opensocial.MediaItem.prototype.setField=function(e,t){return this.fields_[e]=t};opensocial.MessageCollection=function(e){this.fields_=e||{}};opensocial.MessageCollection.Field={ID:"id",TITLE:"title",TOTAL:"total",UNREAD:"unread",UPDATED:"updated",URLS:"urls"};opensocial.MessageCollection.prototype.getField=function(e,t){return opensocial.Container.getField(this.fields_,e,t)};opensocial.MessageCollection.prototype.setField=function(e,t){return this.fields_[e]=t};opensocial.Message=function(e,t){if(typeof e=="string"){this.fields_=t||{};this.fields_[opensocial.Message.Field.BODY]=e}else{this.fields_=e||{}}};opensocial.Message.Field={APP_URL:"appUrl",BODY:"body",BODY_ID:"bodyId",COLLECTION_IDS:"collectionIds",ID:"id",PARENT_ID:"parentId",RECIPIENTS:"recipients",SENDER_ID:"senderId",STATUS:"status",TIME_SENT:"timeSent",TITLE:"title",TITLE_ID:"titleId",TYPE:"type",UPDATED:"updated",URLS:"urls"};opensocial.Message.Type={EMAIL:"email",NOTIFICATION:"notification",PRIVATE_MESSAGE:"privateMessage",PUBLIC_MESSAGE:"publicMessage"};opensocial.Message.Status={NEW:"new",DELETED:"deleted",FLAGGED:"flagged"};opensocial.Message.prototype.getField=function(e,t){return opensocial.Container.getField(this.fields_,e,t)};opensocial.Message.prototype.setField=function(e,t){return this.fields_[e]=t};opensocial.Name=function(e){this.fields_=e||{}};opensocial.Name.Field={FAMILY_NAME:"familyName",GIVEN_NAME:"givenName",ADDITIONAL_NAME:"additionalName",HONORIFIC_PREFIX:"honorificPrefix",HONORIFIC_SUFFIX:"honorificSuffix",UNSTRUCTURED:"unstructured"};opensocial.Name.prototype.getField=function(e,t){return opensocial.Container.getField(this.fields_,e,t)};opensocial.NavigationParameters=function(e){this.fields_=e||{}};opensocial.NavigationParameters.Field={VIEW:"view",OWNER:"owner",PARAMETERS:"parameters"};opensocial.NavigationParameters.prototype.getField=function(e,t){return opensocial.Container.getField(this.fields_,e,t)};opensocial.NavigationParameters.prototype.setField=function(e,t){return this.fields_[e]=t};opensocial.NavigationParameters.DestinationType={VIEWER_DESTINATION:"viewerDestination",RECIPIENT_DESTINATION:"recipientDestination"};opensocial.Organization=function(e){this.fields_=e||{}};opensocial.Organization.Field={NAME:"name",TITLE:"title",DESCRIPTION:"description",FIELD:"field",SUB_FIELD:"subField",START_DATE:"startDate",END_DATE:"endDate",SALARY:"salary",ADDRESS:"address",WEBPAGE:"webpage"};opensocial.Organization.prototype.getField=function(e,t){return opensocial.Container.getField(this.fields_,e,t)};opensocial.Person=function(e,t,n){this.fields_=e||{};this.isOwner_=t;this.isViewer_=n};opensocial.Person.Field={ID:"id",NAME:"name",NICKNAME:"nickname",THUMBNAIL_URL:"thumbnailUrl",PROFILE_URL:"profileUrl",CURRENT_LOCATION:"currentLocation",ADDRESSES:"addresses",EMAILS:"emails",PHONE_NUMBERS:"phoneNumbers",ABOUT_ME:"aboutMe",STATUS:"status",PROFILE_SONG:"profileSong",PROFILE_VIDEO:"profileVideo",GENDER:"gender",SEXUAL_ORIENTATION:"sexualOrientation",RELATIONSHIP_STATUS:"relationshipStatus",AGE:"age",DATE_OF_BIRTH:"dateOfBirth",BODY_TYPE:"bodyType",ETHNICITY:"ethnicity",SMOKER:"smoker",DRINKER:"drinker",CHILDREN:"children",PETS:"pets",LIVING_ARRANGEMENT:"livingArrangement",TIME_ZONE:"timeZone",LANGUAGES_SPOKEN:"languagesSpoken",JOBS:"jobs",JOB_INTERESTS:"jobInterests",SCHOOLS:"schools",INTERESTS:"interests",URLS:"urls",MUSIC:"music",MOVIES:"movies",TV_SHOWS:"tvShows",BOOKS:"books",ACTIVITIES:"activities",SPORTS:"sports",HEROES:"heroes",QUOTES:"quotes",CARS:"cars",FOOD:"food",TURN_ONS:"turnOns",TURN_OFFS:"turnOffs",TAGS:"tags",ROMANCE:"romance",SCARED_OF:"scaredOf",HAPPIEST_WHEN:"happiestWhen",FASHION:"fashion",HUMOR:"humor",LOOKING_FOR:"lookingFor",RELIGION:"religion",POLITICAL_VIEWS:"politicalViews",HAS_APP:"hasApp",NETWORK_PRESENCE:"networkPresence"};opensocial.Person.prototype.getId=function(){return this.getField(opensocial.Person.Field.ID)};var ORDERED_NAME_FIELDS_=[opensocial.Name.Field.HONORIFIC_PREFIX,opensocial.Name.Field.GIVEN_NAME,opensocial.Name.Field.FAMILY_NAME,opensocial.Name.Field.HONORIFIC_SUFFIX,opensocial.Name.Field.ADDITIONAL_NAME];opensocial.Person.prototype.getDisplayName=function(){var e=this.getField(opensocial.Person.Field.NAME);if(e){var t=e.getField(opensocial.Name.Field.UNSTRUCTURED);if(t){return t}var n="";for(var r=0;r<ORDERED_NAME_FIELDS_.length;r++){var i=e.getField(ORDERED_NAME_FIELDS_[r]);if(i){n+=i+" "}}return n.replace(/^\s+|\s+$/g,"")}return this.getField(opensocial.Person.Field.NICKNAME)};opensocial.Person.prototype.getField=function(e,t){return opensocial.Container.getField(this.fields_,e,t)};opensocial.Person.prototype.getAppData=function(e){};opensocial.Person.prototype.isViewer=function(){return!!this.isViewer_};opensocial.Person.prototype.isOwner=function(){return!!this.isOwner_};opensocial.Phone=function(e){this.fields_=e||{}};opensocial.Phone.Field={TYPE:"type",NUMBER:"number"};opensocial.Phone.prototype.getField=function(e,t){return opensocial.Container.getField(this.fields_,e,t)};opensocial.ResponseItem=function(e,t,n,r){this.originalDataRequest_=e;this.data_=t;this.errorCode_=n;this.errorMessage_=r};opensocial.ResponseItem.prototype.hadError=function(){return!!this.errorCode_};opensocial.ResponseItem.Error={NOT_IMPLEMENTED:"notImplemented",UNAUTHORIZED:"unauthorized",FORBIDDEN:"forbidden",BAD_REQUEST:"badRequest",INTERNAL_ERROR:"internalError",LIMIT_EXCEEDED:"limitExceeded"};opensocial.ResponseItem.prototype.getErrorCode=function(){return this.errorCode_};opensocial.ResponseItem.prototype.getErrorMessage=function(){return this.errorMessage_};opensocial.ResponseItem.prototype.getOriginalDataRequest=function(){return this.originalDataRequest_};opensocial.ResponseItem.prototype.getData=function(){return this.data_};opensocial.Url=function(e){this.fields_=e||{}};opensocial.Url.Field={TYPE:"type",LINK_TEXT:"linkText",ADDRESS:"address"};opensocial.Url.prototype.getField=function(e,t){return opensocial.Container.getField(this.fields_,e,t)};var tamings___=tamings___||[];tamings___.push(function(e){___.grantRead(opensocial,"CreateActivityPriority");___.grantRead(opensocial,"EscapeType");___.grantRead(opensocial.Activity,"Field");___.grantRead(opensocial.Address,"Field");___.grantRead(opensocial.Album,"Field");___.grantRead(opensocial.BodyType,"Field");___.grantRead(opensocial.DataRequest,"ActivityRequestFields");___.grantRead(opensocial.DataRequest,"DataRequestFields");___.grantRead(opensocial.DataRequest,"FilterType");___.grantRead(opensocial.DataRequest,"Group");___.grantRead(opensocial.DataRequest,"PeopleRequestFields");___.grantRead(opensocial.DataRequest,"SortOrder");___.grantRead(opensocial.Email,"Field");___.grantRead(opensocial.Enum,"Smoker");___.grantRead(opensocial.Enum,"Drinker");___.grantRead(opensocial.Enum,"Gender");___.grantRead(opensocial.Enum,"LookingFor");___.grantRead(opensocial.Enum,"Presence");___.grantRead(opensocial.IdSpec,"Field");___.grantRead(opensocial.IdSpec,"GroupId");___.grantRead(opensocial.IdSpec,"PersonId");___.grantRead(opensocial.MediaItem,"Field");___.grantRead(opensocial.Message,"Field");___.grantRead(opensocial.MessageCollection,"Field");___.grantRead(opensocial.Name,"Field");___.grantRead(opensocial.NavigationParameters,"Field");___.grantRead(opensocial.Organization,"Field");___.grantRead(opensocial.Person,"Field");___.grantRead(opensocial.Phone,"Field");___.grantRead(opensocial.ResponseItem,"Error");___.grantRead(opensocial.Url,"Field");___.grantRead(JsonRpcRequestItem,"rpc");___.grantRead(JsonRpcRequestItem,"processData");___.grantRead(JsonRpcRequestItem,"processResponse");___.grantRead(JsonRpcRequestItem,"errors");___.grantInnocentMethod(JsonPerson.prototype,"getDisplayName");___.grantInnocentMethod(JsonPerson.prototype,"getAppData");caja___.whitelistCtors([[window,"JsonRpcRequestItem",Object],[opensocial,"Activity",Object],[opensocial,"Address",Object],[opensocial,"Album",Object],[opensocial,"BodyType",Object],[opensocial,"Container",Object],[opensocial,"Collection",Object],[opensocial,"DataRequest",Object],[opensocial,"DataResponse",Object],[opensocial,"Email",Object],[opensocial,"Enum",Object],[opensocial,"Environment",Object],[opensocial,"IdSpec",Object],[opensocial,"MediaItem",Object],[opensocial,"Message",Object],[opensocial,"Name",Object],[opensocial,"NavigationParameters",Object],[opensocial,"Organization",Object],[opensocial,"Person",Object],[opensocial,"Phone",Object],[opensocial,"ResponseItem",Object],[opensocial,"Url",Object]]);caja___.whitelistMeths([[opensocial.Activity,"getField"],[opensocial.Activity,"getId"],[opensocial.Activity,"setField"],[opensocial.Address,"getField"],[opensocial.Album,"getField"],[opensocial.BodyType,"getField"],[opensocial.Container,"getEnvironment"],[opensocial.Container,"requestSendMessage"],[opensocial.Container,"requestShareApp"],[opensocial.Container,"requestCreateActivity"],[opensocial.Container,"hasPermission"],[opensocial.Container,"requestPermission"],[opensocial.Container,"requestData"],[opensocial.Container,"newCreateAlbumRequest"],[opensocial.Container,"newCreateMediaItemRequest"],[opensocial.Container,"newDeleteAlbumRequest"],[opensocial.Container,"newFetchPersonRequest"],[opensocial.Container,"newFetchPeopleRequest"],[opensocial.Container,"newFetchPersonAppDataRequest"],[opensocial.Container,"newUpdatePersonAppDataRequest"],[opensocial.Container,"newRemovePersonAppDataRequest"],[opensocial.Container,"newUpdateAlbumRequest"],[opensocial.Container,"newUpdateMediaItemRequest"],[opensocial.Container,"newFetchActivitiesRequest"],[opensocial.Container,"newFetchAlbumsRequest"],[opensocial.Container,"newFetchMessageCollectionsRequest"],[opensocial.Container,"newFetchMessagesRequest"],[opensocial.Container,"newCollection"],[opensocial.Container,"newPerson"],[opensocial.Container,"newActivity"],[opensocial.Container,"newMediaItem"],[opensocial.Container,"newMessage"],[opensocial.Container,"newIdSpec"],[opensocial.Container,"newNavigationParameters"],[opensocial.Container,"newResponseItem"],[opensocial.Container,"newDataResponse"],[opensocial.Container,"newDataRequest"],[opensocial.Container,"newEnvironment"],[opensocial.Container,"invalidateCache"],[opensocial.Collection,"asArray"],[opensocial.Collection,"each"],[opensocial.Collection,"getById"],[opensocial.Collection,"getOffset"],[opensocial.Collection,"getTotalSize"],[opensocial.Collection,"size"],[opensocial.DataRequest,"add"],[opensocial.DataRequest,"newCreateAlbumRequest"],[opensocial.DataRequest,"newCreateMediaItemRequest"],[opensocial.DataRequest,"newDeleteAlbumRequest"],[opensocial.DataRequest,"newFetchActivitiesRequest"],[opensocial.DataRequest,"newFetchAlbumsRequest"],[opensocial.DataRequest,"newFetchPeopleRequest"],[opensocial.DataRequest,"newFetchPersonAppDataRequest"],[opensocial.DataRequest,"newUpdateAlbumRequest"],[opensocial.DataRequest,"newUpdateMediaItemRequest"],[opensocial.DataRequest,"newFetchPersonRequest"],[opensocial.DataRequest,"newRemovePersonAppDataRequest"],[opensocial.DataRequest,"newUpdatePersonAppDataRequest"],[opensocial.DataRequest,"send"],[opensocial.DataResponse,"get"],[opensocial.DataResponse,"getErrorMessage"],[opensocial.DataResponse,"hadError"],[opensocial.Email,"getField"],[opensocial.Enum,"getDisplayValue"],[opensocial.Enum,"getKey"],[opensocial.Environment,"getDomain"],[opensocial.Environment,"supportsField"],[opensocial.IdSpec,"getField"],[opensocial.IdSpec,"setField"],[opensocial.MediaItem,"getField"],[opensocial.MediaItem,"setField"],[opensocial.Message,"getField"],[opensocial.Message,"setField"],[opensocial.Name,"getField"],[opensocial.NavigationParameters,"getField"],[opensocial.NavigationParameters,"setField"],[opensocial.Organization,"getField"],[opensocial.Person,"getDisplayName"],[opensocial.Person,"getField"],[opensocial.Person,"getId"],[opensocial.Person,"isOwner"],[opensocial.Person,"isViewer"],[opensocial.Phone,"getField"],[opensocial.ResponseItem,"getData"],[opensocial.ResponseItem,"getErrorCode"],[opensocial.ResponseItem,"getErrorMessage"],[opensocial.ResponseItem,"getOriginalDataRequest"],[opensocial.ResponseItem,"hadError"],[opensocial.Url,"getField"]]);caja___.whitelistFuncs([[opensocial.Container,"setContainer"],[opensocial.Container,"get"],[opensocial.Container,"getField"],[opensocial,"getEnvironment"],[opensocial,"hasPermission"],[opensocial,"newActivity"],[opensocial,"newDataRequest"],[opensocial,"newIdSpec"],[opensocial,"newMediaItem"],[opensocial,"newMessage"],[opensocial,"newNavigationParameters"],[opensocial,"requestCreateActivity"],[opensocial,"requestPermission"],[opensocial,"requestSendMessage"],[opensocial,"requestShareApp"]])});gadgets.rpctx=gadgets.rpctx||{};if(!gadgets.rpctx.wpm){gadgets.rpctx.wpm=function(){function o(){function t(t){if(t.data=="postmessage.test"){e=true;if(typeof t.origin==="undefined"){i=true}}}var e=false;gadgets.util.attachBrowserEvent(window,"message",t,false);window.postMessage("postmessage.test","*");if(e){r=true}gadgets.util.removeBrowserEvent(window,"message",t,false)}function u(t){var n=gadgets.json.parse(t.data);if(s){if(!n||!n.f){return}var r=gadgets.rpc.getRelayUrl(n.f)||gadgets.util.getUrlParameters()["parent"];var o=gadgets.rpc.getOrigin(r);if(!i?t.origin!==o:t.domain!==/^.+:\/\/([^:]+).*/.exec(o)[1]){return}}e(n)}var e,t;var n;var r=false;var i=false;var s=false;return{getCode:function(){return"wpm"},isParentVerifiable:function(){return true},init:function(i,s){e=i;t=s;o();if(!r){n=function(e,t,n){e.postMessage(t,n)}}else{n=function(e,t,n){window.setTimeout(function(){e.postMessage(t,n)},0)}}gadgets.util.attachBrowserEvent(window,"message",u,false);t("..",true);return true},setup:function(e,t,n){s=n;if(e===".."){if(s){gadgets.rpc._createRelayIframe(t)}else{gadgets.rpc.call(e,gadgets.rpc.ACK)}}return true},call:function(e,t,r){var i=gadgets.rpc._getTargetWin(e);var s=gadgets.rpc.getRelayUrl(e)||gadgets.util.getUrlParameters()["parent"];var o=gadgets.rpc.getOrigin(s);if(o){n(i,gadgets.json.stringify(r),o)}else{gadgets.error("No relay set (used as window.postMessage targetOrigin)"+", cannot send cross-domain message")}return true},relayOnload:function(e,n){t(e,true)}}}()}gadgets.rpctx=gadgets.rpctx||{};if(!gadgets.rpctx.frameElement){gadgets.rpctx.frameElement=function(){function i(r,i,s){try{if(i!==".."){var o=window.frameElement;if(typeof o[e]==="function"){if(typeof o[e][t]!=="function"){o[e][t]=function(e){n(gadgets.json.parse(e))}}o[e](gadgets.json.stringify(s));return true}}else{var u=document.getElementById(r);if(typeof u[e]==="function"&&typeof u[e][t]==="function"){u[e][t](gadgets.json.stringify(s));return true}}}catch(a){}return false}var e="__g2c_rpc";var t="__c2g_rpc";var n;var r;return{getCode:function(){return"fe"},isParentVerifiable:function(){return false},init:function(e,t){n=e;r=t;return true},setup:function(t,i){if(t!==".."){try{var s=document.getElementById(t);s[e]=function(e){n(gadgets.json.parse(e))}}catch(o){return false}}if(t===".."){r("..",true);var u=function(){window.setTimeout(function(){gadgets.rpc.call(t,gadgets.rpc.ACK)},500)};gadgets.util.registerOnLoadHandler(u)}return true},call:function(e,t,n){return i(e,t,n)}}}()}gadgets.rpctx=gadgets.rpctx||{};if(!gadgets.rpctx.nix){gadgets.rpctx.nix=function(){function l(){var e=o[".."];if(e){return}if(++f>i){gadgets.warn("Nix transport setup failed, falling back...");a("..",false);return}if(!e&&window.opener&&"GetAuthToken"in window.opener){e=window.opener;if(e.GetAuthToken()==gadgets.rpc.getAuthToken("..")){var n=gadgets.rpc.getAuthToken("..");e.CreateChannel(window[t]("..",n),n);o[".."]=e;window.opener=null;a("..",true);return}}window.setTimeout(function(){l()},s)}function c(){var e=window.location.href;var t=e.indexOf("#");if(t==-1){return e}return e.substring(0,t)}function h(e){function i(){var e=window.location.href.split("#")[1]||"";if(e!==r){clearInterval(s);var n=gadgets.util.getUrlParameters(window.location.href);if(n.childtoken==t){l();return}a("..",false)}}var t=2147483647*Math.random()|0;var n=[c(),t];gadgets.rpc._createRelayIframe(e,n);var r=window.location.href.split("#")[1]||"";var s=setInterval(i,100)}var e="GRPC____NIXVBS_wrapper";var t="GRPC____NIXVBS_get_wrapper";var n="GRPC____NIXVBS_handle_message";var r="GRPC____NIXVBS_create_channel";var i=10;var s=500;var o={};var u={};var a;var f=0;return{getCode:function(){return"nix"},isParentVerifiable:function(e){if(e){return u[e]}return false},init:function(i,s){a=s;if(typeof window[t]!=="unknown"){window[n]=function(e){window.setTimeout(function(){i(gadgets.json.parse(e))},0)};window[r]=function(e,t,n){if(gadgets.rpc.getAuthToken(e)===n){o[e]=t;a(e,true)}};var u="Class "+e+"\n "+"Private m_Intended\n"+"Private m_Auth\n"+"Public Sub SetIntendedName(name)\n "+"If isEmpty(m_Intended) Then\n"+"m_Intended = name\n"+"End If\n"+"End Sub\n"+"Public Sub SetAuth(auth)\n "+"If isEmpty(m_Auth) Then\n"+"m_Auth = auth\n"+"End If\n"+"End Sub\n"+"Public Sub SendMessage(data)\n "+n+"(data)\n"+"End Sub\n"+"Public Function GetAuthToken()\n "+"GetAuthToken = m_Auth\n"+"End Function\n"+"Public Sub CreateChannel(channel, auth)\n "+"Call "+r+"(m_Intended, channel, auth)\n"+"End Sub\n"+"End Class\n"+"Function "+t+"(name, auth)\n"+"Dim wrap\n"+"Set wrap = New "+e+"\n"+"wrap.SetIntendedName name\n"+"wrap.SetAuth auth\n"+"Set "+t+" = wrap\n"+"End Function";try{window.execScript(u,"vbscript")}catch(f){return false}}return true},setup:function(e,n,r){u[e]=!!r;if(e===".."){if(r){h(n)}else{l()}return true}try{var i=document.getElementById(e);var s=window[t](e,n);i.contentWindow.opener=s}catch(o){return false}return true},call:function(e,t,n){try{if(o[e]){o[e].SendMessage(gadgets.json.stringify(n))}}catch(r){return false}return true},relayOnload:function(e,t){var n=t[0]+"#childtoken="+t[1];var r=document.getElementById(e);r.src=n}}}()}gadgets.rpctx=gadgets.rpctx||{};if(!gadgets.rpctx.rmr){gadgets.rpctx.rmr=function(){function s(e,t,n,r){var i=function(){document.body.appendChild(e);e.src="about:blank";if(r){e.onload=function(){l(r)}}e.src=t+"#"+n};if(document.body){i()}else{gadgets.util.registerOnLoadHandler(function(){i()})}}function o(e){if(typeof n[e]==="object"){return}var t=document.createElement("iframe");var r=t.style;r.position="absolute";r.top="0px";r.border="0";r.opacity="0";r.width="10px";r.height="1px";t.id="rmrtransport-"+e;t.name=t.id;var i=gadgets.rpc.getRelayUrl(e);if(!i){i=gadgets.rpc.getOrigin(gadgets.util.getUrlParameters()["parent"])+"/robots.txt"}n[e]={frame:t,receiveWindow:null,relayUri:i,searchCounter:0,width:10,waiting:true,queue:[],sendId:0,recvId:0};if(e!==".."){s(t,i,f(e))}u(e)}function u(r){var i=null;n[r].searchCounter++;try{var s=gadgets.rpc._getTargetWin(r);if(r===".."){i=s.frames["rmrtransport-"+gadgets.rpc.RPC_ID]}else{i=s.frames["rmrtransport-.."]}}catch(o){}var a=false;if(i){a=c(r,i)}if(!a){if(n[r].searchCounter>t){return}window.setTimeout(function(){u(r)},e)}}function a(e,t,r,i){var s=null;if(r!==".."){s=n[".."]}else{s=n[e]}if(s){if(t!==gadgets.rpc.ACK){s.queue.push(i)}if(s.waiting||s.queue.length===0&&!(t===gadgets.rpc.ACK&&i&&i.ackAlone===true)){return true}if(s.queue.length>0){s.waiting=true}var o=s.relayUri+"#"+f(e);try{s.frame.contentWindow.location=o;var u=s.width==10?20:10;s.frame.style.width=u+"px";s.width=u}catch(a){return false}}return true}function f(e){var t=n[e];var r={id:t.sendId};if(t){r.d=Array.prototype.slice.call(t.queue,0);r.d.push({s:gadgets.rpc.ACK,id:t.recvId})}return gadgets.json.stringify(r)}function l(e){var t=n[e];var s=t.receiveWindow.location.hash.substring(1);var o=gadgets.json.parse(decodeURIComponent(s))||{};var u=o.d||[];var f=false;var l=false;var c=0;var h=t.recvId-o.id;for(var p=0;p<u.length;++p){var d=u[p];if(d.s===gadgets.rpc.ACK){i(e,true);if(t.waiting){l=true}t.waiting=false;var v=Math.max(0,d.id-t.sendId);t.queue.splice(0,v);t.sendId=Math.max(t.sendId,d.id||0);continue}f=true;if(++c<=h){continue}++t.recvId;r(d)}if(f||l&&t.queue.length>0){var m=e===".."?gadgets.rpc.RPC_ID:"..";a(e,gadgets.rpc.ACK,m,{ackAlone:f})}}function c(e,t){function a(){l(e)}var r=n[e];try{var i=false;i="document"in t;if(!i){return false}i=typeof t["document"]=="object";if(!i){return false}var o=t.location.href;if(o==="about:blank"){return false}}catch(u){return false}r.receiveWindow=t;if(typeof t.attachEvent==="undefined"){t.onresize=a}else{t.attachEvent("onresize",a)}if(e===".."){s(r.frame,r.relayUri,f(e),e)}else{l(e)}return true}var e=500;var t=10;var n={};var r;var i;return{getCode:function(){return"rmr"},isParentVerifiable:function(){return true},init:function(e,t){r=e;i=t;return true},setup:function(e,t){try{o(e)}catch(n){gadgets.warn("Caught exception setting up RMR: "+n);return false}return true},call:function(e,t,n){return a(e,n.s,t,n)}}}()}gadgets.rpctx=gadgets.rpctx||{};if(!gadgets.rpctx.ifpc){gadgets.rpctx.ifpc=function(){function r(e){var t=[];for(var n=0,r=e.length;n<r;++n){t.push(encodeURIComponent(gadgets.json.stringify(e[n])))}return t.join("&")}function i(t){var n;for(var r=e.length-1;r>=0;--r){var i=e[r];try{if(i&&(i.recyclable||i.readyState==="complete")){i.parentNode.removeChild(i);if(window.ActiveXObject){e[r]=i=null;e.splice(r,1)}else{i.recyclable=false;n=i;break}}}catch(s){}}if(!n){n=document.createElement("iframe");n.style.border=n.style.width=n.style.height="0px";n.style.visibility="hidden";n.style.position="absolute";n.onload=function(){this.recyclable=true};e.push(n)}n.src=t;window.setTimeout(function(){document.body.appendChild(n)},0)}var e=[];var t=0;var n;return{getCode:function(){return"ifpc"},isParentVerifiable:function(){return true},init:function(e,t){n=t;n("..",true);return true},setup:function(e,t){n(e,true);return true},call:function(e,n,s){var o=gadgets.rpc.getRelayUrl(e);++t;if(!o){gadgets.warn("No relay file assigned for IFPC");return false}var u=null;if(s.l){var a=s.a;u=[o,"#",r([n,t,1,0,r([n,s.s,"","",n].concat(a))])].join("")}else{u=[o,"#",e,"&",n,"@",t,"&1&0&",encodeURIComponent(gadgets.json.stringify(s))].join("")}i(u);return true}}}()}if(!gadgets.rpc){gadgets.rpc=function(){function x(){return typeof window.postMessage==="function"?gadgets.rpctx.wpm:typeof window.postMessage==="object"?gadgets.rpctx.wpm:window.ActiveXObject?gadgets.rpctx.nix:navigator.userAgent.indexOf("WebKit")>0?gadgets.rpctx.rmr:navigator.product==="Gecko"?gadgets.rpctx.frameElement:gadgets.rpctx.ifpc}function T(e,t){var n=_;if(!t){n=S}d[e]=n;var r=v[e]||[];for(var i=0;i<r.length;++i){var s=r[i];s.t=B(e);n.call(e,s.f,s)}v[e]=[]}function k(){function e(){N=true}if(C){return}gadgets.util.attachBrowserEvent(window,"unload",e,false);C=true}function L(e,t,n,r,i){if(!a[t]||a[t]!==n){gadgets.error("Invalid auth token. "+a[t]+" vs "+n);y(t,E)}i.onunload=function(){if(c[t]&&!N){y(t,w);gadgets.rpc.removeReceiver(t)}};k();r=gadgets.json.parse(decodeURIComponent(r));_.relayOnload(t,r)}function A(r){if(r&&typeof r.s==="string"&&typeof r.f==="string"&&r.a instanceof Array){if(a[r.f]){if(a[r.f]!==r.t){gadgets.error("Invalid auth token. "+a[r.f]+" vs "+r.t);y(r.f,E)}}if(r.s===n){window.setTimeout(function(){T(r.f,true)},0);return}if(r.c){r.callback=function(t){gadgets.rpc.call(r.f,e,null,r.c,t)}}var i=(s[r.s]||s[t]).apply(r,r.a);if(r.c&&typeof i!=="undefined"){gadgets.rpc.call(r.f,e,null,r.c,i)}}}function O(e){if(!e){return""}e=e.toLowerCase();if(e.indexOf("//")==0){e=window.location.protocol+e}if(e.indexOf("://")==-1){e=window.location.protocol+"//"+e}var t=e.substring(e.indexOf("://")+3);var n=t.indexOf("/");if(n!=-1){t=t.substring(0,n)}var r=e.substring(0,e.indexOf("://"));var i="";var s=t.indexOf(":");if(s!=-1){var o=t.substring(s+1);t=t.substring(0,s);if(r==="http"&&o!=="80"||r==="https"&&o!=="443"){i=":"+o}}return r+"://"+t+i}function M(e){if(typeof e==="undefined"||e===".."){return window.parent}e=String(e);var t=window.frames[e];if(t){return t}t=document.getElementById(e);if(t&&t.contentWindow){return t.contentWindow}return null}function D(e,t,n){if(c[e]===true){return}if(typeof c[e]==="undefined"){c[e]=0}var s=document.getElementById(e);if(e===".."||s!=null){if(_.setup(e,t,n)===true){c[e]=true;return}}if(c[e]!==true&&c[e]++<i){window.setTimeout(function(){D(e,t,n)},r)}else{d[e]=S;c[e]=true}}function P(e,t){if(typeof h[e]==="undefined"){h[e]=false;var n=gadgets.rpc.getRelayUrl(e);if(O(n)!==O(window.location.href)){return false}var r=M(e);try{h[e]=r.gadgets.rpc.receiveSameDomain}catch(i){gadgets.error("Same domain call failed: parent= incorrectly set.")}}if(typeof h[e]==="function"){h[e](t);return true}return false}function H(e,t,n){if(!/http(s)?:\/\/.+/.test(t)){if(t.indexOf("//")==0){t=window.location.protocol+t}else if(t.charAt(0)=="/"){t=window.location.protocol+"//"+window.location.host+t}else if(t.indexOf("://")==-1){t=window.location.protocol+"//"+t}}o[e]=t;u[e]=!!n}function B(e){return a[e]}function j(e,t,n){t=t||"";a[e]=String(t);D(e,t,n)}function F(e,t){function n(n){var r=n?n.rpc:{};var i=r.parentRelayUrl;if(i.substring(0,7)!=="http://"&&i.substring(0,8)!=="https://"&&i.substring(0,2)!=="//"){if(typeof p.parent==="string"&&p.parent!==""){if(i.substring(0,1)!=="/"){var s=p.parent.lastIndexOf("/");i=p.parent.substring(0,s+1)+i}else{i=O(p.parent)+i}}}var o=!!r.useLegacyProtocol;H("..",i,o);if(o){_=gadgets.rpctx.ifpc;_.init(A,T)}var u=t||p.forcesecure||false;j("..",e,u)}var r={parentRelayUrl:gadgets.config.NonEmptyStringValidator};gadgets.config.register("rpc",r,n)}function I(e,t,n){var r=n||p.forcesecure||false;var i=t||p.parent;if(i){H("..",i);j("..",e,r)}}function q(e,t,n,r){if(!gadgets.util){return}var i=document.getElementById(e);if(!i){throw new Error("Cannot set up gadgets.rpc receiver with ID: "+e+", element not found.")}var s=t||i.src;H(e,s);var o=gadgets.util.getUrlParameters(i.src);var u=n||o.rpctoken;var a=r||o.forcesecure;j(e,u,a)}function R(e,t,n,r){if(e===".."){var i=n||p.rpctoken||p.ifpctok||"";if(window["__isgadget"]===true){F(i,r)}else{I(i,t,r)}}else{q(e,t,n,r)}}var e="__cb";var t="";var n="__ack";var r=500;var i=10;var s={};var o={};var u={};var a={};var f=0;var l={};var c={};var h={};var p={};var d={};var v={};var m=window.top!==window.self;var g=window.name;var y=function(){};var b=0;var w=1;var E=2;var S=function(){function e(e){return function(){gadgets.log("gadgets.rpc."+e+"("+gadgets.json.stringify(Array.prototype.slice.call(arguments))+"): call ignored. [caller: "+document.location+", isChild: "+m+"]")}}return{getCode:function(){return"noop"},isParentVerifiable:function(){return true},init:e("init"),setup:e("setup"),call:e("call")}}();if(gadgets.util){p=gadgets.util.getUrlParameters()}var N=false,C=false;var _=x();s[t]=function(){gadgets.warn("Unknown RPC service: "+this.s)};s[e]=function(e,t){var n=l[e];if(n){delete l[e];n(t)}};return{config:function(e){if(typeof e.securityCallback==="function"){y=e.securityCallback}},register:function(r,i){if(r===e||r===n){throw new Error("Cannot overwrite callback/ack service")}if(r===t){throw new Error("Cannot overwrite default service:"+" use registerDefault")}s[r]=i},unregister:function(r){if(r===e||r===n){throw new Error("Cannot delete callback/ack service")}if(r===t){throw new Error("Cannot delete default service:"+" use unregisterDefault")}delete s[r]},registerDefault:function(e){s[t]=e},unregisterDefault:function(){delete s[t]},forceParentVerifiable:function(){if(!_.isParentVerifiable()){_=gadgets.rpctx.ifpc}},call:function(e,t,n,r){e=e||"..";var i="..";if(e===".."){i=g}++f;if(n){l[f]=n}var s={s:t,f:i,c:n?f:0,a:Array.prototype.slice.call(arguments,3),t:a[e],l:u[e]};if(e!==".."&&!document.getElementById(e)){gadgets.log("WARNING: attempted send to nonexistent frame: "+e);return}if(P(e,s)){return}var o=d[e];if(!o){if(!v[e]){v[e]=[s]}else{v[e].push(s)}return}if(u[e]){o=gadgets.rpctx.ifpc}if(o.call(e,i,s)===false){d[e]=S;_.call(e,i,s)}},getRelayUrl:function(e){var t=o[e];if(t&&t.substring(0,1)==="/"){if(t.substring(1,2)==="/"){t=document.location.protocol+t}else{t=document.location.protocol+"//"+document.location.host+t}}return t},setRelayUrl:H,setAuthToken:j,setupReceiver:R,getAuthToken:B,removeReceiver:function(e){delete o[e];delete u[e];delete a[e];delete c[e];delete h[e];delete d[e]},getRelayChannel:function(){return _.getCode()},receive:function(e,t){if(e.length>4){A(gadgets.json.parse(decodeURIComponent(e[e.length-1])))}else{L.apply(null,e.concat(t))}},receiveSameDomain:function(e){e.a=Array.prototype.slice.call(e.a);window.setTimeout(function(){A(e)},0)},getOrigin:O,getReceiverOrigin:function(e){var t=d[e];if(!t){return null}if(!t.isParentVerifiable(e)){return null}var n=gadgets.rpc.getRelayUrl(e)||gadgets.util.getUrlParameters().parent;return gadgets.rpc.getOrigin(n)},init:function(){if(_.init(A,T)===false){_=S}if(m){R("..")}},_getTargetWin:M,_createRelayIframe:function(e,t){function s(){document.body.appendChild(i);i.src='javascript:"<html></html>"';i.src=r}var n=gadgets.rpc.getRelayUrl("..");if(!n){return null}var r=n+"#..&"+g+"&"+e+"&"+encodeURIComponent(gadgets.json.stringify(t));var i=document.createElement("iframe");i.style.border=i.style.width=i.style.height="0px";i.style.visibility="hidden";i.style.position="absolute";if(document.body){s()}else{gadgets.util.registerOnLoadHandler(function(){s()})}return i},ACK:n,RPC_ID:g,SEC_ERROR_LOAD_TIMEOUT:b,SEC_ERROR_FRAME_PHISH:w,SEC_ERROR_FORGED_MSG:E}}();gadgets.rpc.init()}var dmm=dmm||{};dmm.Util={};dmm.Util.OverlayType={SHARE_APP:"requestShareAppCallback",PAYMENT:"requestPaymentCallback"};dmm.Util.wrapMethod=function(e,t,n){if(typeof e[t]!=="function"){gadgets.warn("wrapped object should be function!");return}if(typeof n!=="function"){gadgets.warn("wrapper object should be function!");return}var r=e[t];e[t]=function(){var t=r.apply(e,Array.prototype.slice.call(arguments));n();return t}};dmm.Util.wrapMethods=function(e,t,n){if(t.constructor!==Array){gadgets.warn("funcnames should be an Array!");return}for(var r=0,i=t.length;r<i;r++){this.wrapMethod(e,t[r],n)}};dmm.Util.registerOpenOverlayHandler=function(e){var t=e||function(){};this.wrapMethods(opensocial,["requestShareApp","requestPayment"],t)};dmm.Util.registerCloseOverlayHandler=function(e){var t=e||function(){};gadgets.rpc.call(null,"dmm.setCloseOverlayCallback",null,true);gadgets.rpc.register("dmm.closeOverlayCallback",function(e){t(e)})};dmm.Person=function(e){this.fields_=e||{}};dmm.Person.Field={BLOOD_TYPE:"bloodType",USER_TYPE:"userType",GRADE:"grade"};dmm.BillingItem=dmm.BillingItem||{};dmm.BillingItem.Field={IMAGE_URL:"imageUrl",NAME:"name"};dmm.Payment=dmm.Payment||{};dmm.Payment.Field={PAYMENT_ID:"payment_id"};dmm.IgnoreList=function(e){this.fields_=e||{}};dmm.IgnoreList.Field={ID:"id",TARGET_ID:"target_id"};dmm.IgnoreListRequestFields={COUNT:"count",FIRST:"startIndex",PERSON_ID:"personId"};dmm.IgnoreList.prototype.getField=function(e,t){return opensocial.Container.getField(this.fields_,e,t)};dmm.IgnoreList.prototype.setField=function(e,t){return this.fields_[e]=t};dmm.IgnoreList.prototype.getId=function(){return this.getField(dmm.IgnoreList.Field.ID)};dmm.IgnoreList.prototype.getTargetId=function(){return this.getField(dmm.IgnoreList.Field.TARGET_ID)};dmm.newFetchIgnoreListRequest=function(e,t){var n={method:"ignorelist.get"};n.params=opensocial.Container.get().translateIdSpec(e);n.params.appId="@app";FieldTranslations.translateNetworkDistance(e,n.params);for(field in t){n.params[field]=t[field]}return new JsonRpcRequestItem(n,function(e){var e=e["list"];var t=[];if(e){for(var n=0;n<e.length;n++){t.push(new dmm.IgnoreList({id:e[n]["id"],target_id:e[n]["ignorelistId"]}))}}return new opensocial.Collection(t)})};dmm.requestFetchIgnoreList=function(e,t,n){n=n||function(){};var r=opensocial.newDataRequest();r.add(dmm.newFetchIgnoreListRequest(e,t),"key");r.send(function(e){n(e.get("key"))})};dmm.UserText=function(e){this.fields_=e||{}};dmm.UserText.Field={TEXT_ID:"textId",APP_ID:"appId",DATA:"data",AUTHOR_ID:"authorId",OWNER_ID:"ownerId",STATUS:"status",CTIME:"ctime",MTIME:"mtime"};dmm.UserText.prototype.getField=function(e,t){return opensocial.Container.getField(this.fields_,e,t)};dmm.UserText.prototype.setField=function(e,t){return this.fields_[e]=t};dmm.UserText.prototype.getTextId=function(){return this.getField(dmm.UserText.Field.TEXT_ID)};dmm.UserText.prototype.getAppId=function(){return this.getField(dmm.UserText.Field.APP_ID)};dmm.UserText.prototype.getData=function(){return this.getField(dmm.UserText.Field.DATA)};dmm.UserText.prototype.getAuthorId=function(){return this.getField(dmm.UserText.Field.AUTHOR_ID)};dmm.UserText.prototype.getOwnerId=function(){return this.getField(dmm.UserText.Field.OWNER_ID)};dmm.UserText.prototype.getStatus=function(){return this.getField(dmm.UserText.Field.STATUS)};dmm.UserText.prototype.getCtime=function(){return this.getField(dmm.UserText.Field.CTIME)};dmm.UserText.prototype.getMtime=function(){return this.getField(dmm.UserText.Field.MTIME)};dmm.newFetchInspectionRequest=function(e){var t={method:"inspection.get"};t.params={appId:"@app"};if(e["textId"]&&!(e["textId"]instanceof Array)){e["textId"]=[e["textId"]]}for(field in e){t.params[field]=e[field]}return new JsonRpcRequestItem(t,function(e){var t=[];if(e){for(var n=0;n<e.length;n++){t.push(new dmm.UserText(e[n]))}}return new opensocial.Collection(t)})};dmm.requestFetchInspection=function(e,t){t=t||function(){};var n=opensocial.newDataRequest();n.add(dmm.newFetchInspectionRequest(e),"key");n.send(function(e){t(e.get("key"))})};dmm.newCreateInspectionRequest=function(e){var t={method:"inspection.create"};var n=opensocial.newIdSpec({userId:"VIEWER"});t.params=opensocial.Container.get().translateIdSpec(n);t.params.appId="@app";FieldTranslations.translateNetworkDistance(n,t.params);t.params.params={data:e["data"]};return new JsonRpcRequestItem(t,function(e){var t=[];if(e){for(var n=0;n<e.length;n++){t.push(new dmm.UserText(e[n]))}}return new opensocial.Collection(t)})};dmm.requestCreateInspection=function(e,t){t=t||function(){};var n=opensocial.newDataRequest();n.add(dmm.newCreateInspectionRequest(e),"key");n.send(function(e){t(e.get("key"))})};dmm.newUpdateInspectionRequest=function(e){var t={method:"inspection.update"};var n=opensocial.newIdSpec({userId:"VIEWER"});t.params=opensocial.Container.get().translateIdSpec(n);t.params.appId="@app";FieldTranslations.translateNetworkDistance(n,t.params);t.params.textId=e["textId"];t.params.params={data:e["data"]};return new JsonRpcRequestItem(t,function(e){var t=[];if(e){for(var n=0;n<e.length;n++){t.push(new dmm.UserText(e[n]))}}return new opensocial.Collection(t)})};dmm.requestUpdateInspection=function(e,t){t=t||function(){};var n=opensocial.newDataRequest();n.add(dmm.newUpdateInspectionRequest(e),"key");n.send(function(e){t(e.get("key"))})};dmm.newRemoveInspectionRequest=function(e){var t={method:"inspection.delete"};var n=opensocial.newIdSpec({userId:"VIEWER"});t.params=opensocial.Container.get().translateIdSpec(n);t.params.appId="@app";FieldTranslations.translateNetworkDistance(n,t.params);if(e["textId"]&&!(e["textId"]instanceof Array)){e["textId"]=[e["textId"]]}t.params.textId=e["textId"];return new JsonRpcRequestItem(t,function(e){var t=[];if(e){for(var n=0;n<e.length;n++){t.push(new dmm.UserText(e[n]))}}return new opensocial.Collection(t)})};dmm.requestRemoveInspection=function(e,t){t=t||function(){};var n=opensocial.newDataRequest();n.add(dmm.newRemoveInspectionRequest(e),"key");n.send(function(e){t(e.get("key"))})};dmm.Thumbnail=function(e){this.fields_=e||{}};dmm.Thumbnail.Field={ID:"id",URL:"url"};dmm.ThumbnailRequestFields={PERSON_ID:"personId",SIZE:"size"};dmm.Thumbnail.Size={NORMAL:"normal",SMALL:"small",LARGE:"large",HUGE:"huge"};dmm.Thumbnail.prototype.getField=function(e,t){return opensocial.Container.getField(this.fields_,e,t)};dmm.Thumbnail.prototype.setField=function(e,t){return this.fields_[e]=t};dmm.Thumbnail.prototype.getId=function(){return this.getField(dmm.Thumbnail.Field.ID)};dmm.Thumbnail.prototype.getUrl=function(){return this.getField(dmm.Thumbnail.Field.URL)};dmm.newFetchThumbnailRequest=function(e){var t={method:"thumbnail.get"};t.params={appId:"@app"};if(e["personId"]&&!(e["personId"]instanceof Array)){e["personId"]=[e["personId"]]}for(field in e){t.params[field]=e[field]}return new JsonRpcRequestItem(t,function(e){var t=[];if(e){for(var n=0;n<e.length;n++){t.push(new dmm.Thumbnail(e[n]))}}return new opensocial.Collection(t)})};dmm.requestFetchThumbnail=function(e,t){t=t||function(){};var n=opensocial.newDataRequest();n.add(dmm.newFetchThumbnailRequest(e),"key");n.send(function(e){t(e.get("key"))})};dmm.Activity=function(e){this.fields_=e||{}};dmm.Activity.Field={MOBILE_URL:"mobileUrl",TOUCH_URL:"touchUrl"};dmm.Url=function(e){this.fields_=e||{}};dmm.Url.Field={VALUE:"value"};dmm.Message=function(e){this.fields_=e||{}};dmm.Message.UrlType={MOBILE:"mobile",TOUCH:"touch",CANVAS:"canvas"};gadgets.rpc.register("update_security_token",function(e){shindig.auth.updateSecurityToken(e)});gadgets.window=gadgets.window||{};(function(){function t(e,t){var n=window.getComputedStyle(e,"");var r=n.getPropertyValue(t);r.match(/^([0-9]+)/);return parseInt(RegExp.$1,10)}function n(){var e=0;var n=[document.body];while(n.length>0){var r=n.shift();var i=r.childNodes;for(var s=0;s<i.length;s++){var o=i[s];if(typeof o.offsetTop!=="undefined"&&typeof o.scrollHeight!=="undefined"){var u=o.offsetTop+o.scrollHeight+t(o,"margin-bottom");e=Math.max(e,u)}n.push(o)}}return e+t(document.body,"border-bottom")+t(document.body,"margin-bottom")+t(document.body,"padding-bottom")}var e;gadgets.window.adjustHeight=function(t){var r=parseInt(t,10);var i=false;if(isNaN(r)){i=true;var s=gadgets.window.getViewportDimensions().height;var o=document.body;var u=document.documentElement;if(document.compatMode==="CSS1Compat"&&u.scrollHeight){r=u.scrollHeight!==s?u.scrollHeight:u.offsetHeight}else if(navigator.userAgent.indexOf("AppleWebKit")>=0){r=n()}else if(o&&u){var a=u.scrollHeight;var f=u.offsetHeight;if(u.clientHeight!==f){a=o.scrollHeight;f=o.offsetHeight}if(a>s){r=a>f?a:f}else{r=a<f?a:f}}}if(r!==e&&!isNaN(r)&&!(i&&r===0)){e=r;gadgets.rpc.call(null,"resize_iframe",null,r)}}})();var _IG_AdjustIFrameHeight=gadgets.window.adjustHeight;var tamings___=tamings___||[];tamings___.push(function(e){caja___.whitelistFuncs([[gadgets.window,"adjustHeight"],[gadgets.window,"getViewportDimensions"]])});window["FieldTranslations"]=function(){function e(e){if(e){e.key=e.value}}function t(e){if(e){e.address=e.value}}return{translateEnumJson:e,translateUrlJson:t,translateServerPersonToJsPerson:function(n,r){if(n.emails){for(var i=0;i<n.emails.length;i++){n.emails[i].address=n.emails[i].value}}if(n.phoneNumbers){for(var s=0;s<n.phoneNumbers.length;s++){n.phoneNumbers[s].number=n.phoneNumbers[s].value}}if(n.birthday){n.dateOfBirth=n.birthday}if(n.utcOffset){n.timeZone=n.utcOffset}if(n.addresses){for(var o=0;o<n.addresses.length;o++){n.addresses[o].unstructuredAddress=n.addresses[o].formatted}}if(n.gender){var u=n.gender=="male"?"MALE":n.gender=="female"?"FEMALE":null;n.gender={key:u,displayValue:n.gender}}t(n.profileSong);t(n.profileVideo);if(n.urls){for(var a=0;a<n.urls.length;a++){t(n.urls[a])}}e(n.drinker);e(n.lookingFor);e(n.networkPresence);e(n.smoker);if(n.organizations){n.jobs=[];n.schools=[];for(var f=0;f<n.organizations.length;f++){var l=n.organizations[f];if(l.type=="job"){n.jobs.push(l)}else if(l.type=="school"){n.schools.push(l)}}}if(n.name){n.name.unstructured=n.name.formatted}if(n.appData){n.appData=opensocial.Container.escape(n.appData,r,true)}},translateJsPersonFieldsToServerFields:function(e){for(var t=0;t<e.length;t++){if(e[t]=="dateOfBirth"){e[t]="birthday"}else if(e[t]=="timeZone"){e[t]="utcOffset"}else if(e[t]=="jobs"){e[t]="organizations"}else if(e[t]=="schools"){e[t]="organizations"}}e.push("id");e.push("displayName")},translateIsoStringToDate:function(e){var t="([0-9]{4})(-([0-9]{2})(-([0-9]{2})"+"(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(.([0-9]+))?)?"+"(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?";var n=e.match(new RegExp(t));var r=0;var i=new Date(n[1],0,1);if(n[3]){i.setMonth(n[3]-1)}if(n[5]){i.setDate(n[5])}if(n[7]){i.setHours(n[7])}if(n[8]){i.setMinutes(n[8])}if(n[10]){i.setSeconds(n[10])}if(n[12]){i.setMilliseconds(Number("0."+n[12])*1e3)}if(n[14]){r=Number(n[16])*60+Number(n[17]);r*=n[15]=="-"?1:-1}r-=i.getTimezoneOffset();var s=Number(i)+r*60*1e3;return new Date(Number(s))},addAppDataAsProfileFields:function(e){if(e){if(e["appData"]){var t=e["appData"];if(typeof t==="string"){t=[t]}var n=e["profileDetail"]||[];for(var r=0;r<t.length;r++){if(t[r]==="*"){n.push("appData")}else{n.push("appData."+t[r])}}e["appData"]=t}}},translateStandardArguments:function(e,t){if(e["first"]){t.startIndex=e["first"]}if(e["max"]){t.count=e["max"]}if(e["sortOrder"]){t.sortBy=e["sortOrder"]}if(e["filter"]){t.filterBy=e["filter"]}if(e["filterOp"]){t.filterOp=e["filterOp"]}if(e["filterValue"]){t.filterValue=e["filterValue"]}if(e["fields"]){t.fields=e["fields"]}},translateNetworkDistance:function(e,t){if(e.getField("networkDistance")){t.networkDistance=e.getField("networkDistance")}}}}();var JsonActivity=function(e,t){e=e||{};if(!t){JsonActivity.constructArrayObject(e,"mediaItems",JsonMediaItem)}opensocial.Activity.call(this,e)};JsonActivity.inherits(opensocial.Activity);JsonActivity.prototype.toJsonObject=function(){var e=JsonActivity.copyFields(this.fields_);var t=e["mediaItems"]||[];var n=[];for(var r=0;r<t.length;r++){n[r]=t[r].toJsonObject()}e["mediaItems"]=n;return e};var JsonMediaItem=function(e){opensocial.MediaItem.call(this,e["mimeType"],e["url"],e)};JsonMediaItem.inherits(opensocial.MediaItem);JsonMediaItem.prototype.toJsonObject=function(){return JsonActivity.copyFields(this.fields_)};JsonActivity.constructArrayObject=function(e,t,n){var r=e[t];if(r){for(var i=0;i<r.length;i++){r[i]=new n(r[i])}}};JsonActivity.copyFields=function(e){var t={};for(var n in e){t[n]=e[n]}return t};var JsonPerson=function(e){e=e||{};JsonPerson.constructObject(e,"bodyType",opensocial.BodyType);JsonPerson.constructObject(e,"currentLocation",opensocial.Address);JsonPerson.constructObject(e,"name",opensocial.Name);JsonPerson.constructObject(e,"profileSong",opensocial.Url);JsonPerson.constructObject(e,"profileVideo",opensocial.Url);JsonPerson.constructDate(e,"dateOfBirth");JsonPerson.constructArrayObject(e,"addresses",opensocial.Address);JsonPerson.constructArrayObject(e,"emails",opensocial.Email);JsonPerson.constructArrayObject(e,"jobs",opensocial.Organization);JsonPerson.constructArrayObject(e,"phoneNumbers",opensocial.Phone);JsonPerson.constructArrayObject(e,"schools",opensocial.Organization);JsonPerson.constructArrayObject(e,"urls",opensocial.Url);JsonPerson.constructEnum(e,"gender");JsonPerson.constructEnum(e,"smoker");JsonPerson.constructEnum(e,"drinker");JsonPerson.constructEnum(e,"networkPresence");JsonPerson.constructEnumArray(e,"lookingFor");opensocial.Person.call(this,e,e["isOwner"],e["isViewer"])};JsonPerson.inherits(opensocial.Person);JsonPerson.constructEnum=function(e,t){var n=e[t];if(n){e[t]=new opensocial.Enum(n.key,n.displayValue)}};JsonPerson.constructEnumArray=function(e,t){var n=e[t];if(n){for(var r=0;r<n.length;r++){n[r]=new opensocial.Enum(n[r].key,n[r].displayValue)}}};JsonPerson.constructObject=function(e,t,n){var r=e[t];if(r){e[t]=new n(r)}};JsonPerson.constructDate=function(e,t){var n=e[t];if(n){e[t]=FieldTranslations.translateIsoStringToDate(n)}};JsonPerson.constructArrayObject=function(e,t,n){var r=e[t];if(r){for(var i=0;i<r.length;i++){r[i]=new n(r[i])}}};JsonPerson.prototype.getDisplayName=function(){return this.getField("displayName")};JsonPerson.prototype.getAppData=function(e){var t=this.getField("appData");return t&&t[e]};var JsonMessageCollection=function(e){e=e||{};opensocial.MessageCollection.call(this,e)};JsonMessageCollection.inherits(opensocial.MessageCollection);JsonMessageCollection.prototype.toJsonObject=function(){return JsonMessageCollection.copyFields(this.fields_)};JsonMessageCollection.copyFields=function(e){var t={};for(var n in e){t[n]=e[n]}return t};var JsonMessage=function(e,t){t=t||{};opensocial.Message.call(this,e,t)};JsonMessage.inherits(opensocial.Message);JsonMessage.prototype.toJsonObject=function(){return JsonMessage.copyFields(this.fields_)};JsonMessage.copyFields=function(e){var t={};for(var n in e){t[n]=e[n]}return t};opensocial.BillingItem=function(e){this.fields_=e||{};this.fields_[opensocial.BillingItem.Field.COUNT]=this.fields_[opensocial.BillingItem.Field.COUNT]||1};opensocial.BillingItem.Field={SKU_ID:"skuId",PRICE:"price",COUNT:"count",DESCRIPTION:"description"};opensocial.BillingItem.prototype.getField=function(e,t){return opensocial.Container.getField(this.fields_,e,t)};opensocial.BillingItem.prototype.setField=function(e,t){return this.fields_[e]=t};opensocial.Payment=function(e){this.fields_=e||{};this.fields_[opensocial.Payment.Field.PAYMENT_TYPE]=this.fields_[opensocial.Payment.Field.PAYMENT_TYPE]||opensocial.Payment.PaymentType.PAYMENT};opensocial.Payment.prototype.isPayment=function(){return this.fields_[opensocial.Payment.Field.PAYMENT_TYPE]==opensocial.Payment.PaymentType.PAYMENT};opensocial.Payment.prototype.isCredit=function(){return this.fields_[opensocial.Payment.Field.PAYMENT_TYPE]==opensocial.Payment.PaymentType.CREDIT};opensocial.Payment.prototype.isComplete=function(){return!!this.fields_[opensocial.Payment.Field.PAYMENT_COMPLETE]};opensocial.Payment.Field={SANDBOX:"sandbox",ITEMS:"items",AMOUNT:"amount",MESSAGE:"message",PARAMETERS:"parameters",PAYMENT_TYPE:"paymentType",ORDER_ID:"orderId",ORDERED_TIME:"orderedTime",SUBMITTED_TIME:"submittedTime",EXECUTED_TIME:"executedTime",RESPONSE_CODE:"responseCode",RESPONSE_MESSAGE:"responseMessage",PAYMENT_COMPLETE:"paymentComplete"};opensocial.Payment.prototype.getField=function(e,t){return opensocial.Container.getField(this.fields_,e,t)};opensocial.Payment.prototype.setField=function(e,t){return this.fields_[e]=t};opensocial.Payment.PaymentType={PAYMENT:"payment",CREDIT:"credit"};opensocial.Payment.ResponseCode={APP_LOGIC_ERROR:"appLogicError",APP_NETWORK_FAILURE:"appNetworkFailure",INSUFFICIENT_MONEY:"insufficientMoney",INVALID_TOKEN:"invalidToken",MALFORMED_REQUEST:"malformedRequest",NOT_IMPLEMENTED:"notImplemented",OK:"ok",PAYMENT_ERROR:"paymentError",PAYMENT_PROCESSOR_ALREADY_OPENED:"paymentProcessorAlreadyOpened",UNKNOWN_ERROR:"unknownError",USER_CANCELLED:"userCancelled"};opensocial.Payment.RecordsRequestFields={SANDBOX:"sandbox",MAX:"max",INCOMPLETE_ONLY:"incompleteOnly"};var JsonPayment=function(e,t){e=e||{};if(!t){JsonPayment.constructArrayObject(e,"items",JsonBillingItem)}opensocial.Payment.call(this,e)};JsonPayment.inherits(opensocial.Payment);JsonPayment.prototype.toJsonObject=function(){var e=JsonPayment.copyFields(this.fields_);var t=e["items"]||[];var n=[];for(var r=0;r<t.length;r++){n[r]=t[r].toJsonObject()}e["items"]=n;return e};var JsonBillingItem=function(e){opensocial.BillingItem.call(this,e)};JsonBillingItem.inherits(opensocial.BillingItem);JsonBillingItem.prototype.toJsonObject=function(){return JsonPayment.copyFields(this.fields_)};JsonPayment.constructArrayObject=function(e,t,n){var r=e[t];if(r){for(var i=0;i<r.length;i++){r[i]=new n(r[i])}}};JsonPayment.copyFields=function(e){var t={};for(var n in e){t[n]=e[n]}return t};opensocial.requestPayment=function(e,t){opensocial.Container.get().requestPayment(e,t)};opensocial.requestPaymentRecords=function(e,t){opensocial.Container.get().requestPaymentRecords(e,t)};opensocial.newPayment=function(e){return opensocial.Container.get().newPayment(e)};opensocial.newBillingItem=function(e){return opensocial.Container.get().newBillingItem(e)};var JsonRpcContainer=function(e){opensocial.Container.call(this);var t=e.path;this.path_=t.replace("%host%",document.location.host);var n=e.invalidatePath;this.invalidatePath_=n.replace("%host%",document.location.host);var r=e.supportedFields;var i={};for(var s in r){if(r.hasOwnProperty(s)){i[s]={};for(var o=0;o<r[s].length;o++){var u=r[s][o];i[s][u]=true}}}this.environment_=new opensocial.Environment(e.domain,i);this.securityToken_=shindig.auth.getSecurityToken();gadgets.rpc.register("shindig.requestShareApp_callback",JsonRpcContainer.requestShareAppCallback_)};var JsonRpcRequestItem=function(e,t){this.rpc=e;this.processData=t||function(e){return e};this.processResponse=function(e,t,n,r){var i=n?JsonRpcContainer.translateHttpError(n["code"]):null;return new opensocial.ResponseItem(e,n?null:this.processData(t),i,r)}};(function(){var e={};JsonRpcContainer.inherits(opensocial.Container);JsonRpcContainer.prototype.getEnvironment=function(){return this.environment_};JsonRpcContainer.prototype.requestSendMessage=function(e,t,n,r){n=n||function(){};var i=opensocial.newDataRequest();var s=opensocial.newIdSpec({userId:"VIEWER"});t.setField(opensocial.Message.Field.RECIPIENTS,[e]);i.add(this.newCreateMessageRequest(s,t),"key");i.send(function(e){n(e.get("key"))})};JsonRpcContainer.prototype.requestPayment=function(e,t){var n=opensocial.newDataRequest();var r=opensocial.newIdSpec({userId:"VIEWER"});if(!e){if(t){t(new opensocial.ResponseItem(null,e,opensocial.Payment.ResponseCode.MALFORMED_REQUEST,"Payment object is undefined."))}return}gadgets.rpc.register("dmm.requestPaymentCallback",function(n,r){var i=null;var s=null;if(n==200){if(r){e.setField(dmm.Payment.Field.PAYMENT_ID,r.payment_id)}if(r.response_code=="OK"){e.setField(opensocial.Payment.Field.RESPONSE_CODE,opensocial.Payment.ResponseCode.OK)}else{e.setField(opensocial.Payment.Field.RESPONSE_CODE,opensocial.Payment.ResponseCode.USER_CANCELLED)}s=new opensocial.ResponseItem(null,e)}else{var o=opensocial.Payment.ResponseCode.PAYMENT_ERROR;var u=r?r.message:"unknown error";s=new opensocial.ResponseItem(null,i,o,u)}if(t){t(s)}});n.add(this.newCreatePaymentRequest(r,e),"key");n.send(function(n){if(n.hadError()){if(t){t(new opensocial.ResponseItem(null,e,opensocial.Payment.ResponseCode.PAYMENT_ERROR,"request payment error"))}return}gadgets.rpc.call(null,"dmm.requestPayment",null,n.get("key").getData())})};JsonRpcContainer.prototype.requestShareApp=function(e,t,n,r){gadgets.rpc.register("dmm.requestShareAppCallback",function(e,t){var r=null;if(t){r={recipientIds:t}}var i=null;if(e==200){i=new opensocial.ResponseItem(null,r)}else{var s,o;if(e==403){s=opensocial.ResponseItem.Error.FORBIDDEN;o="Viewer does not use this application."}else{s=opensocial.ResponseItem.Error.INTERNAL_ERROR;o=["Unknown Error: ",e]}i=new opensocial.ResponseItem(null,r,s,o)}n(i)});gadgets.rpc.call(null,"dmm.requestShareApp",null,n,e,t,r)};JsonRpcContainer.requestShareAppCallback_=function(t,n,r,i){callback=e[t];if(callback){e[t]=null;var s=null;if(i){s={recipientIds:i}}var o=new opensocial.ResponseItem(null,s,r);callback(o)}};JsonRpcContainer.prototype.requestCreateActivity=function(e,t,n){n=n||function(){};var r=opensocial.newDataRequest();var i=opensocial.newIdSpec({userId:"VIEWER"});r.add(this.newCreateActivityRequest(i,e),"key");r.send(function(e){n(e.get("key"))})};JsonRpcContainer.prototype.requestData=function(e,t){t=t||function(){};var n=e.getRequestObjects();var r=n.length;if(r===0){window.setTimeout(function(){t(new opensocial.DataResponse({},true))},0);return}var i=new Array(r);for(var s=0;s<r;s++){var o=n[s];i[s]=o.request.rpc;if(o.key){i[s].id=o.key}}var u=function(e){if(e.errors[0]){JsonRpcContainer.generateErrorResponse(e,n,t);return}e=e.result||e.data;var r=false;var i={};for(var s=0;s<e.length;s++){e[e[s].id]=e[s]}for(var o=0;o<n.length;o++){var u=n[o];var a=e[o];if(u.key&&a.id!==u.key){throw"Request key("+u.key+") and response id("+a.id+") do not match"}var f=a.result||a.data;var l=a.error;var c="";if(l){c=l.message}var h=u.request.processResponse(u.request,f,l,c);r=r||h.hadError();if(u.key){i[u.key]=h}}var p=new opensocial.DataResponse(i,r);t(p)};var a={CONTENT_TYPE:"JSON",METHOD:"POST",AUTHORIZATION:"SIGNED",POST_DATA:gadgets.json.stringify(i)};var f=[this.path_];var l=shindig.auth.getSecurityToken();if(l){f.push("?st=",encodeURIComponent(l))}this.sendRequest(f.join(""),u,a,"application/json")};JsonRpcContainer.prototype.sendRequest=function(e,t,n,r){gadgets.io.makeNonProxiedRequest(e,t,n,r)};JsonRpcContainer.generateErrorResponse=function(e,t,n){var r=JsonRpcContainer.translateHttpError(e.rc||e.result.error||e.data.error)||opensocial.ResponseItem.Error.INTERNAL_ERROR;var i={};for(var s=0;s<t.length;s++){i[t[s].key]=new opensocial.ResponseItem(t[s].request,null,r)}n(new opensocial.DataResponse(i,true))};JsonRpcContainer.translateHttpError=function(e){if(e==501){return opensocial.ResponseItem.Error.NOT_IMPLEMENTED}else if(e==401){return opensocial.ResponseItem.Error.UNAUTHORIZED}else if(e==403){return opensocial.ResponseItem.Error.FORBIDDEN}else if(e==400){return opensocial.ResponseItem.Error.BAD_REQUEST}else if(e==500){return opensocial.ResponseItem.Error.INTERNAL_ERROR}else if(e==404){return opensocial.ResponseItem.Error.BAD_REQUEST}else if(e==417){return opensocial.ResponseItem.Error.LIMIT_EXCEEDED}};JsonRpcContainer.prototype.makeIdSpec=function(e){return opensocial.newIdSpec({userId:e})};JsonRpcContainer.prototype.translateIdSpec=function(e){var t=e.getField("userId");var n=e.getField("groupId");if(!opensocial.Container.isArray(t)){t=[t]}for(var r=0;r<t.length;r++){if(t[r]==="OWNER"){t[r]="@owner"}else if(t[r]==="VIEWER"){t[r]="@viewer"}}if(n==="FRIENDS"){n="@friends"}else if(n=="ALL"){n="@all"}else if(n==="SELF"||!n){n="@self"}return{userId:t,groupId:n}};JsonRpcContainer.prototype.newFetchPersonRequest=function(e,t){var n=this.newFetchPeopleRequest(this.makeIdSpec(e),t);var r=this;return new JsonRpcRequestItem(n.rpc,function(e){return r.createPersonFromJson(e,t)})};JsonRpcContainer.prototype.newFetchPeopleRequest=function(e,t){var n={method:"people.get"};n.params=this.translateIdSpec(e);FieldTranslations.addAppDataAsProfileFields(t);FieldTranslations.translateStandardArguments(t,n.params);FieldTranslations.translateNetworkDistance(e,n.params);if(t["profileDetail"]){FieldTranslations.translateJsPersonFieldsToServerFields(t["profileDetail"]);n.params.fields=t["profileDetail"]}var r=this;return new JsonRpcRequestItem(n,function(e){var n;if(e["list"]){n=e["list"]}else{n=[e]}var i=[];for(var s=0;s<n.length;s++){i.push(r.createPersonFromJson(n[s],t))}return new opensocial.Collection(i,e["startIndex"],e["totalResults"])})};JsonRpcContainer.prototype.createPersonFromJson=function(e,t){FieldTranslations.translateServerPersonToJsPerson(e,t);return new JsonPerson(e)};JsonRpcContainer.prototype.getFieldsList=function(e){if(this.hasNoKeys(e)||this.isWildcardKey(e[0])){return[]}else{return e}};JsonRpcContainer.prototype.hasNoKeys=function(e){return!e||e.length===0};JsonRpcContainer.prototype.isWildcardKey=function(e){return e==="*"};JsonRpcContainer.prototype.newActivity=function(e){return new JsonActivity(e,true)};JsonRpcContainer.prototype.newCreateActivityRequest=function(e,t){var n={method:"activities.create"};n.params=this.translateIdSpec(e);n.params.appId="@app";FieldTranslations.translateNetworkDistance(e,n.params);n.params.activity=t.toJsonObject();return new JsonRpcRequestItem(n)};JsonRpcContainer.prototype.newCreateMessageRequest=function(e,t){var n={method:"messages.create"};n.params=this.translateIdSpec(e);n.params.appId="@app";FieldTranslations.translateNetworkDistance(e,n.params);n.params.message=t.toJsonObject();return new JsonRpcRequestItem(n)};JsonRpcContainer.prototype.newCreatePaymentRequest=function(e,t){var n={method:"paymentjs.create"};n.params=this.translateIdSpec(e);n.params.appId="@app";FieldTranslations.translateNetworkDistance(e,n.params);n.params.params=t.toJsonObject();return new JsonRpcRequestItem(n)}})();JsonRpcContainer.prototype.newMessage=function(e,t){return new JsonMessage(e,t)};JsonRpcContainer.prototype.newMessageCollection=function(e){return new JsonMessageCollection(e)};JsonRpcContainer.prototype.newBillingItem=function(e){return new JsonBillingItem(e)};JsonRpcContainer.prototype.newPayment=function(e){return new JsonPayment(e,true)};var requiredConfig={path:gadgets.config.NonEmptyStringValidator,invalidatePath:gadgets.config.NonEmptyStringValidator,domain:gadgets.config.NonEmptyStringValidator,enableCaja:gadgets.config.BooleanValidator,supportedFields:gadgets.config.ExistsValidator};gadgets.config.register("opensocial",requiredConfig,function(e){ShindigContainer=function(){JsonRpcContainer.call(this,e["opensocial"])};ShindigContainer.inherits(JsonRpcContainer);opensocial.Container.setContainer(new ShindigContainer)});opensocial.DataRequest.prototype.newUpdatePersonAppDataRequest_09=opensocial.DataRequest.prototype.newUpdatePersonAppDataRequest;opensocial.DataRequest.prototype.newUpdatePersonAppDataRequest=function(e,t,n){if(e!==opensocial.IdSpec.PersonId.VIEWER){throw Error("Cannot update app data for person "+e)}return this.newUpdatePersonAppDataRequest_09(t,n)};opensocial.DataRequest.prototype.newRemovePersonAppDataRequest_09=opensocial.DataRequest.prototype.newRemovePersonAppDataRequest;opensocial.DataRequest.prototype.newRemovePersonAppDataRequest=function(e,t){if(e!==opensocial.IdSpec.PersonId.VIEWER){throw Error("Cannot remove app data for person "+e)}return this.newRemovePersonAppDataRequest_09(t)};gadgets.config.init({"core.io":{proxyUrl:"//%host%/gadgets/proxy?container=default&refresh=%refresh%&url=%url%%rewriteMime%",jsonProxyUrl:"//%host%/gadgets/makeRequest"},rpc:{parentRelayUrl:"/container/rpc_relay.html",useLegacyProtocol:false},opensocial:{path:"http://%host%/social/rpc",invalidatePath:"http://%host%/gadgets/api/rpc",domain:"osapi.dmm.com",enableCaja:false,supportedFields:{person:["id",{name:["familyName","givenName","unstructured"]},"thumbnailUrl","profileUrl","id",{name:["familyName","givenName","unstructured"]},"thumbnailUrl","profileUrl"],activity:["appId","body","bodyId","externalId","id","mediaItems","postedTime","priority","streamFaviconUrl","streamSourceUrl","streamTitle","streamUrl","templateParams","title","url","userId","appId","body","bodyId","externalId","id","mediaItems","postedTime","priority","streamFaviconUrl","streamSourceUrl","streamTitle","streamUrl","templateParams","title","url","userId"],album:["id","thumbnailUrl","title","description","location","ownerId","id","thumbnailUrl","title","description","location","ownerId"],mediaItem:["album_id","created","description","duration","file_size","id","language","last_updated","location","mime_type","num_comments","num_views","num_votes","rating","start_time","tagged_people","tags","thumbnail_url","title","type","url","album_id","created","description","duration","file_size","id","language","last_updated","location","mime_type","num_comments","num_views","num_votes","rating","start_time","tagged_people","tags","thumbnail_url","title","type","url"]}},"core.util":{"":{},"core.none":{},globals:{},"core.config":{},"core.json":{},"core.util":{},"core.prefs":{},"shindig.auth":{},"core.io":{},"core.legacy":{},"dynamic-height.util":{},flash:{},"locked-domain":{},"opensocial-reference":{},rpc:{},dmm:{},"auth-refresh":{},"dynamic-height":{},"opensocial-base":{},"opensocial-payment":{},"security-token":{},"opensocial-jsonrpc":{},opensocial:{},"opensocial-0.9":{},"opensocial-0.8":{}},"osapi.services":{"gadgets.rpc":["container.listMethods"],"http://%host%/rpc":["messages.update","albums.update","activities.delete","activities.update","activities.supportedFields","albums.get","activities.get","mediaitems.update","messages.get","appdata.get","system.listMethods","people.supportedFields","messages.create","mediaitems.delete","mediaitems.create","people.get","people.create","albums.delete","messages.delete","appdata.update","activities.create","mediaitems.get","albums.create","appdata.delete","people.update","appdata.create"],"http://%host%/gadgets/api/rpc":["cache.invalidate","http.head","http.get","http.put","http.post","http.delete"]}});gadgets.Prefs.setMessages_([]);gadgets.Prefs.setDefaultPrefs_([]);gadgets.io.preloaded_={}
</script>
	
	<!-- FIXES FOR IT, because these people can't even write a fully working javascript -->
	<script type="text/javascript">
		gadgets.error = function(err) {
			throw new Exception(err)
		}
	</script>
	
	<!-- KanColle support scripts from the osapi iframe -->
	<script src="http://203.104.105.167/gadget/script/jquery.min.js"></script>
	<script src="http://203.104.105.167/gadget/script/rollover.js"></script>
	<script src="http://203.104.105.167/gadget/script/jss.js"></script>
	<script src="http://203.104.105.167/gadget/js/kcs_const.js"></script>
	<script src="http://203.104.105.167/gadget/js/kcs_content.js"></script>
	<script src="http://203.104.105.167/gadget/js/kcs_global.js"></script>
	<script src="http://203.104.105.167/gadget/js/kcs_login.js"></script>
	<script src="http://203.104.105.167/gadget/js/kcs_payment.js"></script>
	<script src="http://203.104.105.167/gadget/js/kcs_shareapp.js"></script>
	<script src="http://203.104.105.167/gadget/js/kcs_flash.js"></script>
	<script src="http://203.104.105.167/gadget/js/kcs_inspection.js"></script>
</head>
<body ondragstart="return false;" oncontextmenu="return false;">
	<div id="adFlashWrap"></div>
	<div id="wsFlashWrap"></div>
	<div id="flashWrap"></div>
</body>
</html>
